

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>IS-IS &mdash; VyOS 1.5.x (circinus) documentation</title>
      <link rel="stylesheet" type="text/css" href="../../static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="../../static/sphinx-design.min.css?v=95c83b7e" />

  
    <link rel="shortcut icon" href="../../static/vyos-logo-icon.png"/>
      <script src="../../static/jquery.js?v=5d32c60e"></script>
      <script src="../../static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../static/documentation_options.js?v=719443cf"></script>
      <script src="../../static/doctools.js?v=9bcbadda"></script>
      <script src="../../static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../static/design-tabs.js?v=f930bc37"></script>
    <script src="../../static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="next" title="MPLS" href="mpls.html" />
    <link rel="prev" title="IGMP Proxy" href="igmp-proxy.html" />
    <style>#vyos-header-iframe{position:fixed;top:0;left:0;right:0;z-index:999999999;width:100%;border:none}</style>
    <style>#vyos-footer-iframe{width:100%;border:none}</style>
    <link href="../../static/css/custom.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/lists.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/hints.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/headers.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/breadcrumbs.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/linkButtons.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/text.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/leftSidebar.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/scrolls.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/tables.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/installation/running-on-bare-metal.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/code-snippets.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/separate-commands.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/configuration/index.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/datatables.css" rel="stylesheet" type="text/css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Archivo:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script type="text/javascript" charset="utf8" src="../../static/js/datatables.js"></script>
    <script type="text/javascript" charset="utf8" src="../../static/js/tables.js"></script>
    <script type="text/javascript" charset="utf8" src="../../static/js/codecopier.js"></script>
    <script type="text/javascript" charset="utf8" src="../../static/js/sidebar.js"></script>
    <script type="text/javascript" charset="utf8" src="../../static/js/footer.js"></script>
    </script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            VyOS
              <img src="../../static/vyos-logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../introducing/about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../introducing/history.html">History</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog/index.html">Changelog</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">First Steps</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../installation/index.html">Installation and Image Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../quick-start.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cli.html">Command Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cli.html#configuration-overview">Configuration Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Adminguide</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Configuration Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../container/index.html">Container</a></li>
<li class="toctree-l2"><a class="reference internal" href="../firewall/index.html">Firewall</a></li>
<li class="toctree-l2"><a class="reference internal" href="../highavailability/index.html">High availability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interfaces/index.html">Interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../loadbalancing/index.html">Load-balancing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nat/index.html">NAT</a></li>
<li class="toctree-l2"><a class="reference internal" href="../policy/index.html">Policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pki/index.html">PKI</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Protocols</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="arp.html">ARP</a></li>
<li class="toctree-l3"><a class="reference internal" href="babel.html">Babel</a></li>
<li class="toctree-l3"><a class="reference internal" href="bfd.html">BFD</a></li>
<li class="toctree-l3"><a class="reference internal" href="bgp.html">BGP</a></li>
<li class="toctree-l3"><a class="reference internal" href="failover.html">Failover</a></li>
<li class="toctree-l3"><a class="reference internal" href="igmp-proxy.html">IGMP Proxy</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">IS-IS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#general">General</a></li>
<li class="toctree-l4"><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="mpls.html">MPLS</a></li>
<li class="toctree-l3"><a class="reference internal" href="multicast.html">Multicast</a></li>
<li class="toctree-l3"><a class="reference internal" href="segment-routing.html">Segment Routing</a></li>
<li class="toctree-l3"><a class="reference internal" href="openfabric.html">OpenFabric</a></li>
<li class="toctree-l3"><a class="reference internal" href="ospf.html">OSPF</a></li>
<li class="toctree-l3"><a class="reference internal" href="pim.html">PIM – Protocol Independent Multicast</a></li>
<li class="toctree-l3"><a class="reference internal" href="pim6.html">PIM6 - Protocol Independent Multicast for IPv6</a></li>
<li class="toctree-l3"><a class="reference internal" href="rip.html">RIP</a></li>
<li class="toctree-l3"><a class="reference internal" href="rpki.html">RPKI</a></li>
<li class="toctree-l3"><a class="reference internal" href="static.html">Static</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../service/index.html">Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="../system/index.html">System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../trafficpolicy/index.html">Traffic Policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vpn/index.html">VPN</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vrf/index.html">VRF</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vrf/index.html#l3vpn-vrfs">L3VPN VRFs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../operation/index.html">Operation Mode</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../automation/index.html">VyOS Automation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshooting/index.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configexamples/index.html">Configuration Blueprints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configexamples/index.html#configuration-blueprints-autotest">Configuration Blueprints (autotest)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/build-vyos.html">Build VyOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/issues-features.html">Issues/Feature requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/upstream-packages.html">Upstream packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/testing.html">Testing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Misc</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../documentation.html">Write Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../coverage.html">Coverage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../copyright.html">Copyright Notice</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">VyOS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Configuration Guide</a></li>
          <li class="breadcrumb-item"><a href="index.html">Protocols</a></li>
      <li class="breadcrumb-item active">IS-IS</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../sources/configuration/protocols/isis.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="admonition error">
<p class="admonition-title">Call for Contributions</p><p>This section needs improvements, examples and explanations.</p>
<p>Please take a look at the Contributing Guide for our <a class="reference internal" href="../../documentation.html#documentation"><span class="std std-ref">Write Documentation</span></a>.</p>
</div><section id="is-is">
<span id="routing-isis"></span><h1>IS-IS<a class="headerlink" href="#is-is" title="Link to this heading"></a></h1>
<p><abbr title="Intermediate System to Intermediate System">IS-IS</abbr> is a link-state
interior gateway protocol (IGP) which is described in ISO10589,
<span class="target" id="index-0"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc1195.html"><strong>RFC 1195</strong></a>, <span class="target" id="index-1"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc5308.html"><strong>RFC 5308</strong></a>. IS-IS runs the Dijkstra shortest-path first (SPF)
algorithm to create a database of the network’s topology, and
from that database to determine the best (that is, lowest cost) path to a
destination. The intermediate systems (the name for routers) exchange topology
information with their directly connected neighbors. IS-IS runs directly on
the data link layer (Layer 2). IS-IS addresses are called
<abbr title="Network Entity Titles">NETs</abbr> and can be 8 to 20 bytes long, but are
generally 10 bytes long. The tree database that is created with IS-IS is
similar to the one that is created with OSPF in that the paths chosen should
be similar. Comparisons to OSPF are inevitable and often are reasonable ones
to make in regards to the way a network will respond with either IGP.</p>
<section id="general">
<h2>General<a class="headerlink" href="#general" title="Link to this heading"></a></h2>
<section id="configuration">
<h3>Configuration<a class="headerlink" href="#configuration" title="Link to this heading"></a></h3>
<section id="mandatory-settings">
<h4>Mandatory Settings<a class="headerlink" href="#mandatory-settings" title="Link to this heading"></a></h4>
<p>For IS-IS top operate correctly, one must do the equivalent of a Router ID in
CLNS. This Router ID is called the <abbr title="Network Entity Title">NET</abbr>. This
must be unique for each and every router that is operating in IS-IS. It also
must not be duplicated otherwise the same issues that occur within OSPF will
occur within IS-IS when it comes to said duplication.</p>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-net-network-entity-title">
set protocols isis net &lt;network-entity-title&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-net-network-entity-title" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command sets network entity title (NET) provided in ISO format.</p>
<p>Here is an example <abbr title="Network Entity Title">NET</abbr> value:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>49.0001.1921.6800.1002.00
</pre></div>
</div>
<p>The CLNS address consists of the following parts:</p>
<ul class="simple">
<li><p><abbr title="Address family authority identifier">AFI</abbr> - <code class="docutils literal notranslate"><span class="pre">49</span></code> The AFI value
49 is what IS-IS uses for private addressing.</p></li>
<li><p>Area identifier: <code class="docutils literal notranslate"><span class="pre">0001</span></code> IS-IS area number (numerical area <code class="docutils literal notranslate"><span class="pre">1</span></code>)</p></li>
<li><p>System identifier: <code class="docutils literal notranslate"><span class="pre">1921.6800.1002</span></code> - for system identifiers we recommend
to use IP address or MAC address of the router itself. The way to construct
this is to keep all of the zeroes of the router IP address, and then change
the periods from being every three numbers to every four numbers. The
address that is listed here is <code class="docutils literal notranslate"><span class="pre">192.168.1.2</span></code>, which if expanded will turn
into <code class="docutils literal notranslate"><span class="pre">192.168.001.002</span></code>. Then all one has to do is move the dots to have
four numbers instead of three. This gives us <code class="docutils literal notranslate"><span class="pre">1921.6800.1002</span></code>.</p></li>
<li><p><abbr title="Network Entity Title">NET</abbr> selector: <code class="docutils literal notranslate"><span class="pre">00</span></code> Must always be 00. This
setting indicates “this system” or “local system.”</p></li>
</ul>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-interface-interface">
set protocols isis interface &lt;interface&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-interface-interface" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command enables IS-IS on this interface, and allows for
adjacency to occur. Note that the name of IS-IS instance must be
the same as the one used to configure the IS-IS process.</p>
</div>
</div>
</section>
<section id="is-is-global-configuration">
<h4>IS-IS Global Configuration<a class="headerlink" href="#is-is-global-configuration" title="Link to this heading"></a></h4>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-dynamic-hostname">
set protocols isis dynamic-hostname</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-dynamic-hostname" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command enables support for dynamic hostname TLV. Dynamic hostname
mapping determined as described in <span class="target" id="index-2"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc2763.html"><strong>RFC 2763</strong></a>, Dynamic Hostname
Exchange Mechanism for IS-IS.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-level-level-1-level-1-2-level-2">
set protocols isis level &lt;level-1|level-1-2|level-2&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-level-level-1-level-1-2-level-2" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command defines the IS-IS router behavior:</p>
<ul class="simple">
<li><p><strong>level-1</strong> - Act as a station (Level 1) router only.</p></li>
<li><p><strong>level-1-2</strong> - Act as a station (Level 1) router and area (Level 2) router.</p></li>
<li><p><strong>level-2-only</strong> - Act as an area (Level 2) router only.</p></li>
</ul>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-lsp-mtu-size">
set protocols isis lsp-mtu &lt;size&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-lsp-mtu-size" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command configures the maximum size of generated
<abbr title="Link State PDUs">LSPs</abbr>, in bytes. The size range is 128 to 4352.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-metric-style-narrow-transition-wide">
set protocols isis metric-style &lt;narrow|transition|wide&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-metric-style-narrow-transition-wide" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command sets old-style (ISO 10589) or new style packet formats:</p>
<ul class="simple">
<li><p><strong>narrow</strong> - Use old style of TLVs with narrow metric.</p></li>
<li><p><strong>transition</strong> - Send and accept both styles of TLVs during transition.</p></li>
<li><p><strong>wide</strong> - Use new style of TLVs to carry wider metric.</p></li>
</ul>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-purge-originator">
set protocols isis purge-originator</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-purge-originator" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command enables <span class="target" id="index-3"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6232.html"><strong>RFC 6232</strong></a> purge originator identification. Enable
purge originator identification (POI) by adding the type, length and value
(TLV) with the Intermediate System (IS) identification to the LSPs that do
not contain POI information. If an IS generates a purge, VyOS adds this TLV
with the system ID of the IS to the purge.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-set-attached-bit">
set protocols isis set-attached-bit</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-set-attached-bit" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command sets ATT bit to 1 in Level1 LSPs. It is described in <span class="target" id="index-4"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc3787.html"><strong>RFC 3787</strong></a>.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-set-overload-bit">
set protocols isis set-overload-bit</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-set-overload-bit" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command sets overload bit to avoid any transit traffic through this
router. It is described in <span class="target" id="index-5"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc3787.html"><strong>RFC 3787</strong></a>.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-name-default-information-originate-ipv4-ipv6-level-1">
set protocols isis name default-information originate &lt;ipv4|ipv6&gt; level-1</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-name-default-information-originate-ipv4-ipv6-level-1" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command will generate a default-route in L1 database.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-name-default-information-originate-ipv4-ipv6-level-2">
set protocols isis name default-information originate &lt;ipv4|ipv6&gt; level-2</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-name-default-information-originate-ipv4-ipv6-level-2" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command will generate a default-route in L2 database.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-ldp-sync">
set protocols isis ldp-sync</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-ldp-sync" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command will enable IGP-LDP synchronization globally for ISIS. This
requires for LDP to be functional. This is described in <span class="target" id="index-6"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc5443.html"><strong>RFC 5443</strong></a>. By
default all interfaces operational in IS-IS are enabled for synchronization.
Loopbacks are exempt.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-ldp-sync-holddown-seconds">
set protocols isis ldp-sync holddown &lt;seconds&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-ldp-sync-holddown-seconds" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command will change the hold down value globally for IGP-LDP
synchronization during convergence/interface flap events.</p>
</div>
</div>
</section>
<section id="interface-configuration">
<h4>Interface Configuration<a class="headerlink" href="#interface-configuration" title="Link to this heading"></a></h4>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-interface-interface-circuit-type-level-1-level-1-2-level-2-only">
set protocols isis interface &lt;interface&gt; circuit-type &lt;level-1|level-1-2|level-2-only&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-interface-interface-circuit-type-level-1-level-1-2-level-2-only" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command specifies circuit type for interface:</p>
<ul class="simple">
<li><p><strong>level-1</strong> - Level-1 only adjacencies are formed.</p></li>
<li><p><strong>level-1-2</strong> - Level-1-2 adjacencies are formed</p></li>
<li><p><strong>level-2-only</strong> - Level-2 only adjacencies are formed</p></li>
</ul>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-interface-interface-hello-interval-seconds">
set protocols isis interface &lt;interface&gt; hello-interval &lt;seconds&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-interface-interface-hello-interval-seconds" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command sets hello interval in seconds on a given interface.
The range is 1 to 600.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-interface-interface-hello-multiplier-seconds">
set protocols isis interface &lt;interface&gt; hello-multiplier &lt;seconds&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-interface-interface-hello-multiplier-seconds" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command sets multiplier for hello holding time on a given
interface. The range is 2 to 100.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-interface-interface-hello-padding">
set protocols isis interface &lt;interface&gt; hello-padding</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-interface-interface-hello-padding" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command configures padding on hello packets to accommodate asymmetrical
maximum transfer units (MTUs) from different hosts as described in
<span class="target" id="index-7"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc3719.html"><strong>RFC 3719</strong></a>. This helps to prevent a premature adjacency Up state when one
routing devices MTU does not meet the requirements to establish the adjacency.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-interface-interface-metric-metric">
set protocols isis interface &lt;interface&gt; metric &lt;metric&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-interface-interface-metric-metric" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command set default metric for circuit.</p>
<p>The metric range is 1 to 16777215 (Max value depend if metric support narrow
or wide value).</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-interface-interface-network-point-to-point">
set protocols isis interface &lt;interface&gt; network point-to-point</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-interface-interface-network-point-to-point" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command specifies network type to Point-to-Point. The default
network type is broadcast.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-interface-interface-passive">
set protocols isis interface &lt;interface&gt; passive</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-interface-interface-passive" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command configures the passive mode for this interface.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-interface-interface-password-plaintext-password-text">
set protocols isis interface &lt;interface&gt; password plaintext-password &lt;text&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-interface-interface-password-plaintext-password-text" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command configures the authentication password for the interface.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-interface-interface-priority-number">
set protocols isis interface &lt;interface&gt; priority &lt;number&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-interface-interface-priority-number" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command sets priority for the interface for
<abbr title="Designated Intermediate System">DIS</abbr> election. The priority
range is 0 to 127.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-interface-interface-psnp-interval-number">
set protocols isis interface &lt;interface&gt; psnp-interval &lt;number&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-interface-interface-psnp-interval-number" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command sets PSNP interval in seconds. The interval range is 0
to 127.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-interface-interface-no-three-way-handshake">
set protocols isis interface &lt;interface&gt; no-three-way-handshake</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-interface-interface-no-three-way-handshake" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command disables Three-Way Handshake for P2P adjacencies which
described in <span class="target" id="index-8"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc5303.html"><strong>RFC 5303</strong></a>. Three-Way Handshake is enabled by default.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-interface-interface-ldp-sync-disable">
set protocols isis interface &lt;interface&gt; ldp-sync disable</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-interface-interface-ldp-sync-disable" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command disables IGP-LDP sync for this specific interface.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-interface-interface-ldp-sync-holddown-seconds">
set protocols isis interface &lt;interface&gt; ldp-sync holddown  &lt;seconds&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-interface-interface-ldp-sync-holddown-seconds" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command will change the hold down value for IGP-LDP synchronization
during convergence/interface flap events, but for this interface only.</p>
</div>
</div>
</section>
<section id="route-redistribution">
<h4>Route Redistribution<a class="headerlink" href="#route-redistribution" title="Link to this heading"></a></h4>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-redistribute-ipv4-route-source-level-1">
set protocols isis redistribute ipv4 &lt;route source&gt; level-1</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-redistribute-ipv4-route-source-level-1" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command redistributes routing information from the given route source
into the ISIS database as Level-1. There are six modes available for route
source: bgp, connected, kernel, ospf, rip, static.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-redistribute-ipv4-route-source-level-2">
set protocols isis redistribute ipv4 &lt;route source&gt; level-2</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-redistribute-ipv4-route-source-level-2" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command redistributes routing information from the given route source
into the ISIS database as Level-2. There are six modes available for route
source: bgp, connected, kernel, ospf, rip, static.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-redistribute-ipv4-route-source-level-1-level-2-metric-number">
set protocols isis redistribute ipv4 &lt;route source&gt; &lt;level-1|level-2&gt; metric &lt;number&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-redistribute-ipv4-route-source-level-1-level-2-metric-number" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command specifies metric for redistributed routes from the given route
source. There are six modes available for route source: bgp, connected,
kernel, ospf, rip, static. The metric range is 1 to 16777215.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-redistribute-ipv4-route-source-level-1-level-2-route-map-name">
set protocols isis redistribute ipv4 &lt;route source&gt; &lt;level-1|level-2&gt; route-map &lt;name&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-redistribute-ipv4-route-source-level-1-level-2-route-map-name" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command allows to use route map to filter redistributed routes from
the given route source. There are six modes available for route source:
bgp, connected, kernel, ospf, rip, static.</p>
</div>
</div>
</section>
<section id="timers">
<h4>Timers<a class="headerlink" href="#timers" title="Link to this heading"></a></h4>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-lsp-gen-interval-seconds">
set protocols isis lsp-gen-interval &lt;seconds&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-lsp-gen-interval-seconds" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command sets minimum interval in seconds between regenerating same
LSP. The interval range is 1 to 120.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-lsp-refresh-interval-seconds">
set protocols isis lsp-refresh-interval &lt;seconds&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-lsp-refresh-interval-seconds" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command sets LSP refresh interval in seconds. IS-IS generates LSPs
when the state of a link changes. However, to ensure that routing
databases on all routers remain converged, LSPs in stable networks are
generated on a regular basis even though there has been no change to
the state of the links. The interval range is 1 to 65235. The default
value is 900 seconds.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-max-lsp-lifetime-seconds">
set protocols isis max-lsp-lifetime &lt;seconds&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-max-lsp-lifetime-seconds" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command sets LSP maximum LSP lifetime in seconds. The interval range
is 350 to 65535. LSPs remain in a database for 1200 seconds by default.
If they are not refreshed by that time, they are deleted. You can change
the LSP refresh interval or the LSP lifetime. The LSP refresh interval
should be less than the LSP lifetime or else LSPs will time out before
they are refreshed.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-spf-interval-seconds">
set protocols isis spf-interval &lt;seconds&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-spf-interval-seconds" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command sets minimum interval between consecutive SPF calculations in
seconds.The interval range is 1 to 120.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-spf-delay-ietf-holddown-milliseconds">
set protocols isis spf-delay-ietf holddown &lt;milliseconds&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-spf-delay-ietf-holddown-milliseconds" title="Permalink to this Command"></a></div></div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-spf-delay-ietf-init-delay-milliseconds">
set protocols isis spf-delay-ietf init-delay &lt;milliseconds&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-spf-delay-ietf-init-delay-milliseconds" title="Permalink to this Command"></a></div></div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-spf-delay-ietf-long-delay-milliseconds">
set protocols isis spf-delay-ietf long-delay &lt;milliseconds&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-spf-delay-ietf-long-delay-milliseconds" title="Permalink to this Command"></a></div></div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-spf-delay-ietf-short-delay-milliseconds">
set protocols isis spf-delay-ietf short-delay &lt;milliseconds&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-spf-delay-ietf-short-delay-milliseconds" title="Permalink to this Command"></a></div></div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-spf-delay-ietf-time-to-learn-milliseconds">
set protocols isis spf-delay-ietf time-to-learn &lt;milliseconds&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-spf-delay-ietf-time-to-learn-milliseconds" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This commands specifies the Finite State Machine (FSM) intended to
control the timing of the execution of SPF calculations in response
to IGP events. The process described in <span class="target" id="index-9"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc8405.html"><strong>RFC 8405</strong></a>.</p>
</div>
</div>
</section>
<section id="loop-free-alternate-lfa">
<h4>Loop Free Alternate (LFA)<a class="headerlink" href="#loop-free-alternate-lfa" title="Link to this heading"></a></h4>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-fast-reroute-lfa-remote-prefix-list-name-level-1-level-2">
set protocols isis fast-reroute lfa remote prefix-list &lt;name&gt; &lt;level-1|level-2&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-fast-reroute-lfa-remote-prefix-list-name-level-1-level-2" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command enables IP fast re-routing that is part of <span class="target" id="index-10"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc5286.html"><strong>RFC 5286</strong></a>.
Specifically this is a prefix list which references a prefix in which
will select eligible PQ nodes for remote LFA backups.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-fast-reroute-lfa-local-load-sharing-disable-level-1-level-2">
set protocols isis fast-reroute lfa local load-sharing disable &lt;level-1|level-2&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-fast-reroute-lfa-local-load-sharing-disable-level-1-level-2" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command disables the load sharing across multiple LFA backups.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-fast-reroute-lfa-local-tiebreaker-downstream-lowest-backup-metric-node-protecting-index-number-level-1-level-2">
set protocols isis fast-reroute lfa local tiebreaker &lt;downstream|lowest-backup-metric|node-protecting&gt; index &lt;number&gt; &lt;level-1|level-2&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-fast-reroute-lfa-local-tiebreaker-downstream-lowest-backup-metric-node-protecting-index-number-level-1-level-2" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command will configure a tie-breaker for multiple local LFA backups.
The lower index numbers will be processed first.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-isis-fast-reroute-lfa-local-priority-limit-medium-high-critical-level-1-level-2">
set protocols isis fast-reroute lfa local priority-limit &lt;medium|high|critical&gt; &lt;level-1|level-2&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-isis-fast-reroute-lfa-local-priority-limit-medium-high-critical-level-1-level-2" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command will limit LFA backup computation up to the specified
prefix priority.</p>
</div>
</div>
</section>
</section>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Link to this heading"></a></h2>
<section id="enable-is-is">
<h3>Enable IS-IS<a class="headerlink" href="#enable-is-is" title="Link to this heading"></a></h3>
<p><strong>Node 1:</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set interfaces loopback lo address &#39;192.168.255.255/32&#39;
set interfaces ethernet eth1 address &#39;192.0.2.1/24&#39;

set protocols isis interface eth1
set protocols isis interface lo
set protocols isis net &#39;49.0001.1921.6825.5255.00&#39;
</pre></div>
</div>
<p><strong>Node 2:</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set interfaces ethernet eth1 address &#39;192.0.2.2/24&#39;

set interfaces loopback lo address &#39;192.168.255.254/32&#39;
set interfaces ethernet eth1 address &#39;192.0.2.2/24&#39;

set protocols isis interface eth1
set protocols isis interface lo
set protocols isis net &#39;49.0001.1921.6825.5254.00&#39;
</pre></div>
</div>
<p>This gives us the following neighborships, Level 1 and Level 2:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Node-1@vyos:~$ show isis neighbor
Area VyOS:
  System Id           Interface   L  State        Holdtime SNPA
 vyos                eth1        1  Up            28       0c87.6c09.0001
 vyos                eth1        2  Up            28       0c87.6c09.0001

Node-2@vyos:~$ show isis neighbor
Area VyOS:
  System Id           Interface   L  State        Holdtime SNPA
 vyos                eth1        1  Up            29       0c33.0280.0001
 vyos                eth1        2  Up            28       0c33.0280.0001
</pre></div>
</div>
<p>Here’s the IP routes that are populated. Just the loopback:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Node-1@vyos:~$ show ip route isis
Codes: K - kernel route, C - connected, S - static, R - RIP,
       O - OSPF, I - IS-IS, B - BGP, E - EIGRP, N - NHRP,
       T - Table, v - VNC, V - VNC-Direct, A - Babel, F - PBR,
       f - OpenFabric,
       &gt; - selected route, * - FIB route, q - queued, r - rejected, b - backup
       t - trapped, o - offload failure

I   192.0.2.0/24 [115/20] via 192.0.2.2, eth1 inactive, weight 1, 00:02:22
I&gt;* 192.168.255.254/32 [115/20] via 192.0.2.2, eth1, weight 1, 00:02:22

Node-2@vyos:~$ show ip route isis
Codes: K - kernel route, C - connected, S - static, R - RIP,
       O - OSPF, I - IS-IS, B - BGP, E - EIGRP, N - NHRP,
       T - Table, v - VNC, V - VNC-Direct, A - Babel, F - PBR,
       f - OpenFabric,
       &gt; - selected route, * - FIB route, q - queued, r - rejected, b - backup
       t - trapped, o - offload failure

I   192.0.2.0/24 [115/20] via 192.0.2.1, eth1 inactive, weight 1, 00:02:21
I&gt;* 192.168.255.255/32 [115/20] via 192.0.2.1, eth1, weight 1, 00:02:21
</pre></div>
</div>
</section>
<section id="enable-is-is-and-redistribute-routes-not-natively-in-is-is">
<h3>Enable IS-IS and redistribute routes not natively in IS-IS<a class="headerlink" href="#enable-is-is-and-redistribute-routes-not-natively-in-is-is" title="Link to this heading"></a></h3>
<p><strong>Node 1:</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set interfaces dummy dum0 address &#39;203.0.113.1/24&#39;
set interfaces ethernet eth1 address &#39;192.0.2.1/24&#39;

set policy prefix-list EXPORT-ISIS rule 10 action &#39;permit&#39;
set policy prefix-list EXPORT-ISIS rule 10 prefix &#39;203.0.113.0/24&#39;
set policy route-map EXPORT-ISIS rule 10 action &#39;permit&#39;
set policy route-map EXPORT-ISIS rule 10 match ip address prefix-list &#39;EXPORT-ISIS&#39;

set protocols isis interface eth1
set protocols isis net &#39;49.0001.1921.6800.1002.00&#39;
set protocols isis redistribute ipv4 connected level-2 route-map &#39;EXPORT-ISIS&#39;
</pre></div>
</div>
<p><strong>Node 2:</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set interfaces ethernet eth1 address &#39;192.0.2.2/24&#39;

set protocols isis interface eth1
set protocols isis net &#39;49.0001.1921.6800.2002.00&#39;
</pre></div>
</div>
<p>Routes on Node 2:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Node-2@r2:~$ show ip route isis
Codes: K - kernel route, C - connected, S - static, R - RIP,
       O - OSPF, I - IS-IS, B - BGP, E - EIGRP, N - NHRP,
       T - Table, v - VNC, V - VNC-Direct, A - Babel, D - SHARP,
       F - PBR, f - OpenFabric,
       &gt; - selected route, * - FIB route, q - queued route, r - rejected route

I   203.0.113.0/24 [115/10] via 192.0.2.1, eth1, 00:03:42
</pre></div>
</div>
</section>
<section id="enable-is-is-and-igp-ldp-synchronization">
<h3>Enable IS-IS and IGP-LDP synchronization<a class="headerlink" href="#enable-is-is-and-igp-ldp-synchronization" title="Link to this heading"></a></h3>
<p><strong>Node 1:</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set interfaces loopback lo address 192.168.255.255/32
set interfaces ethernet eth0 address 192.0.2.1/24

set protocols isis interface eth0
set protocols isis interface lo passive
set protocols isis ldp-sync
set protocols isis net 49.0001.1921.6825.5255.00

set protocols mpls interface eth0
set protocols mpls ldp discovery transport-ipv4-address 192.168.255.255
set protocols mpls ldp interface lo
set protocols mpls ldp interface eth0
set protocols mpls ldp parameters transport-prefer-ipv4
set protocols mpls ldp router-id 192.168.255.255
</pre></div>
</div>
<p>This gives us IGP-LDP synchronization for all non-loopback interfaces with
a holddown timer of zero seconds:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Node-1@vyos:~$  show isis mpls ldp-sync
eth0
  LDP-IGP Synchronization enabled: yes
  holddown timer in seconds: 0
  State: Sync achieved
</pre></div>
</div>
</section>
<section id="enable-is-is-with-segment-routing-experimental">
<h3>Enable IS-IS with Segment Routing (Experimental)<a class="headerlink" href="#enable-is-is-with-segment-routing-experimental" title="Link to this heading"></a></h3>
<p><strong>Node 1:</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set interfaces loopback lo address &#39;192.168.255.255/32&#39;
set interfaces ethernet eth1 address &#39;192.0.2.1/24&#39;

set protocols isis interface eth1
set protocols isis interface lo
set protocols isis net &#39;49.0001.1921.6825.5255.00&#39;
set protocols isis segment-routing global-block high-label-value &#39;599&#39;
set protocols isis segment-routing global-block low-label-value &#39;550&#39;
set protocols isis segment-routing prefix 192.168.255.255/32 index value &#39;1&#39;
set protocols isis segment-routing prefix 192.168.255.255/32 index explicit-null
set protocols mpls interface &#39;eth1&#39;
</pre></div>
</div>
<p><strong>Node 2:</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set interfaces loopback lo address &#39;192.168.255.254/32&#39;
set interfaces ethernet eth1 address &#39;192.0.2.2/24&#39;

set protocols isis interface eth1
set protocols isis interface lo
set protocols isis net &#39;49.0001.1921.6825.5254.00&#39;
set protocols isis segment-routing global-block high-label-value &#39;599&#39;
set protocols isis segment-routing global-block low-label-value &#39;550&#39;
set protocols isis segment-routing prefix 192.168.255.254/32 index value &#39;2&#39;
set protocols isis segment-routing prefix 192.168.255.254/32 index explicit-null
set protocols mpls interface &#39;eth1&#39;
</pre></div>
</div>
<p>This gives us MPLS segment routing enabled and labels for far end loopbacks:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Node-1@vyos:~$ show mpls table
 Inbound Label  Type        Nexthop                Outbound Label
 ----------------------------------------------------------------------
 552            SR (IS-IS)  192.0.2.2              IPv4 Explicit Null &lt;-- Node-2 loopback learned on Node-1
 15000          SR (IS-IS)  192.0.2.2              implicit-null
 15001          SR (IS-IS)  fe80::e87:6cff:fe09:1  implicit-null
 15002          SR (IS-IS)  192.0.2.2              implicit-null
 15003          SR (IS-IS)  fe80::e87:6cff:fe09:1  implicit-null

Node-2@vyos:~$ show mpls table
 Inbound Label  Type        Nexthop               Outbound Label
 ---------------------------------------------------------------------
 551            SR (IS-IS)  192.0.2.1             IPv4 Explicit Null &lt;-- Node-1 loopback learned on Node-2
 15000          SR (IS-IS)  192.0.2.1             implicit-null
 15001          SR (IS-IS)  fe80::e33:2ff:fe80:1  implicit-null
 15002          SR (IS-IS)  192.0.2.1             implicit-null
 15003          SR (IS-IS)  fe80::e33:2ff:fe80:1  implicit-null
</pre></div>
</div>
<p>Here is the routing tables showing the MPLS segment routing label operations:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Node-1@vyos:~$ show ip route isis
Codes: K - kernel route, C - connected, S - static, R - RIP,
       O - OSPF, I - IS-IS, B - BGP, E - EIGRP, N - NHRP,
       T - Table, v - VNC, V - VNC-Direct, A - Babel, F - PBR,
       f - OpenFabric,
       &gt; - selected route, * - FIB route, q - queued, r - rejected, b - backup
       t - trapped, o - offload failure

I   192.0.2.0/24 [115/20] via 192.0.2.2, eth1 inactive, weight 1, 00:07:48
I&gt;* 192.168.255.254/32 [115/20] via 192.0.2.2, eth1, label IPv4 Explicit Null, weight 1, 00:03:39

Node-2@vyos:~$ show ip route isis
Codes: K - kernel route, C - connected, S - static, R - RIP,
       O - OSPF, I - IS-IS, B - BGP, E - EIGRP, N - NHRP,
       T - Table, v - VNC, V - VNC-Direct, A - Babel, F - PBR,
       f - OpenFabric,
       &gt; - selected route, * - FIB route, q - queued, r - rejected, b - backup
       t - trapped, o - offload failure

I   192.0.2.0/24 [115/20] via 192.0.2.1, eth1 inactive, weight 1, 00:07:46
I&gt;* 192.168.255.255/32 [115/20] via 192.0.2.1, eth1, label IPv4 Explicit Null, weight 1, 00:03:43
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="igmp-proxy.html" class="btn btn-neutral float-left" title="IGMP Proxy" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="mpls.html" class="btn btn-neutral float-right" title="MPLS" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../../copyright.html">Copyright</a> 2024, VyOS maintainers and contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <head>
      <style>
          #branch-select-container {
              position: fixed;
              bottom: 10px;
              right: 10px;
              background-color: #f0f0f0;
              padding: 5px;
              border: 1px solid #ccc;
              border-radius: 5px;
          }
      </style>
  </head>
  <body>
      <div id="branch-select-container">
          <select id="branch-select">
              <option value="sagitta">Sagitta</option>
              <option value="circinus">Circinus</option>
          </select>
      </div>
      <script>
          // Define the branches
          const branches = ['sagitta', 'circinus'];
  
          // Get the current branch name from the URL
          const currentUrl = window.location.href;
          const currentBranch = branches.find(branch => currentUrl.includes(branch));
  
          // Set the selected option in the dropdown
          const branchSelect = document.getElementById('branch-select');
          branchSelect.value = currentBranch;
  
          // Add an event listener to the dropdown
          branchSelect.addEventListener('change', () => {
              const newBranch = branchSelect.value;
              const newUrl = currentUrl.replace(currentBranch, newBranch);
              window.location.href = newUrl;
          });
      </script>
  </body>


</body>
</html>