

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Troubleshooting &mdash; VyOS 1.5.x (circinus) documentation</title>
      <link rel="stylesheet" type="text/css" href="../static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="../static/sphinx-design.min.css?v=95c83b7e" />

  
    <link rel="shortcut icon" href="../static/vyos-logo-icon.png"/>
      <script src="../static/jquery.js?v=5d32c60e"></script>
      <script src="../static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../static/documentation_options.js?v=719443cf"></script>
      <script src="../static/doctools.js?v=9bcbadda"></script>
      <script src="../static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../static/design-tabs.js?v=f930bc37"></script>
    <script src="../static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="Configuration Blueprints" href="../configexamples/index.html" />
    <link rel="prev" title="go-vyos" href="../automation/vyos-govyos.html" />
    <style>#vyos-header-iframe{position:fixed;top:0;left:0;right:0;z-index:999999999;width:100%;border:none}</style>
    <style>#vyos-footer-iframe{width:100%;border:none}</style>
    <link href="../static/css/custom.css" rel="stylesheet" type="text/css">
    <link href="../static/css/lists.css" rel="stylesheet" type="text/css">
    <link href="../static/css/hints.css" rel="stylesheet" type="text/css">
    <link href="../static/css/headers.css" rel="stylesheet" type="text/css">
    <link href="../static/css/breadcrumbs.css" rel="stylesheet" type="text/css">
    <link href="../static/css/linkButtons.css" rel="stylesheet" type="text/css">
    <link href="../static/css/text.css" rel="stylesheet" type="text/css">
    <link href="../static/css/leftSidebar.css" rel="stylesheet" type="text/css">
    <link href="../static/css/scrolls.css" rel="stylesheet" type="text/css">
    <link href="../static/css/tables.css" rel="stylesheet" type="text/css">
    <link href="../static/css/installation/running-on-bare-metal.css" rel="stylesheet" type="text/css">
    <link href="../static/css/code-snippets.css" rel="stylesheet" type="text/css">
    <link href="../static/css/separate-commands.css" rel="stylesheet" type="text/css">
    <link href="../static/css/configuration/index.css" rel="stylesheet" type="text/css">
    <link href="../static/css/datatables.css" rel="stylesheet" type="text/css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Archivo:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script type="text/javascript" charset="utf8" src="../static/js/datatables.js"></script>
    <script type="text/javascript" charset="utf8" src="../static/js/tables.js"></script>
    <script type="text/javascript" charset="utf8" src="../static/js/codecopier.js"></script>
    <script type="text/javascript" charset="utf8" src="../static/js/sidebar.js"></script>
    <script type="text/javascript" charset="utf8" src="../static/js/footer.js"></script>
    </script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            VyOS
              <img src="../static/vyos-logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../introducing/about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introducing/history.html">History</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog/index.html">Changelog</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">First Steps</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Installation and Image Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick-start.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">Command Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli.html#configuration-overview">Configuration Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Adminguide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../configuration/index.html">Configuration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operation/index.html">Operation Mode</a></li>
<li class="toctree-l1"><a class="reference internal" href="../automation/index.html">VyOS Automation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#connectivity-tests">Connectivity Tests</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#basic-connectivity-tests">Basic Connectivity Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#advanced-connectivity-tests">Advanced Connectivity Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ipv6-topology-discovery">IPv6 Topology Discovery</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#router-discovery">Router Discovery</a></li>
<li class="toctree-l4"><a class="reference internal" href="#neighbor-discovery">Neighbor Discovery</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#interface-names">Interface names</a></li>
<li class="toctree-l2"><a class="reference internal" href="#monitoring">Monitoring</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#traffic-dumps">Traffic Dumps</a></li>
<li class="toctree-l3"><a class="reference internal" href="#interface-bandwidth-usage">Interface Bandwidth Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#interface-performance">Interface Performance</a></li>
<li class="toctree-l3"><a class="reference internal" href="#monitor-command">Monitor command</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#terminal-console">Terminal/Console</a></li>
<li class="toctree-l2"><a class="reference internal" href="#system-information">System Information</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#boot-steps">Boot Steps</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../configexamples/index.html">Configuration Blueprints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configexamples/index.html#configuration-blueprints-autotest">Configuration Blueprints (autotest)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contributing/build-vyos.html">Build VyOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/issues-features.html">Issues/Feature requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/upstream-packages.html">Upstream packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/testing.html">Testing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Misc</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../documentation.html">Write Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coverage.html">Coverage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../copyright.html">Copyright Notice</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">VyOS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Troubleshooting</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../sources/troubleshooting/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="troubleshooting">
<span id="id1"></span><h1>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Link to this heading"></a></h1>
<p>Sometimes things break or don’t work as expected. This section describes
several troubleshooting tools provided by VyOS that can help when something
goes wrong.</p>
<section id="connectivity-tests">
<h2>Connectivity Tests<a class="headerlink" href="#connectivity-tests" title="Link to this heading"></a></h2>
<section id="basic-connectivity-tests">
<h3>Basic Connectivity Tests<a class="headerlink" href="#basic-connectivity-tests" title="Link to this heading"></a></h3>
<p>Verifying connectivity can be done with the familiar <cite>ping</cite> and <cite>traceroute</cite>
commands. The options for each are shown (the options for each command were
displayed using the built-in help as described in the <a class="reference internal" href="../cli.html#cli"><span class="std std-ref">Command Line Interface</span></a>
section and are omitted from the output here):</p>
<div class="cmd cmd-op">
<div class="opcmd-heading">
<span class="opcmd" id="opcmd-ping-destination">
ping &lt;destination&gt;</span>
<a class="cmdlink" href="#opcmd-ping-destination" title="Permalink to this Command"></a></div><div class="opcmd-body">
<p>Send ICMP echo requests to destination host. There are multiple options to
ping, inkl. VRF support.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>vyos@vyos:~$ ping 10.1.1.1
Possible completions:
  &lt;Enter&gt;       Execute the current command
  adaptive      Ping options
  allow-broadcast
  audible
  bypass-route
  count
  deadline
  do-not-fragment
  flood
  interface
  interval
  mark
  no-loopback
  numeric
  pattern
  quiet
  record-route
  size
  timestamp
  tos
  ttl
  verbose
  vrf
</pre></div>
</div>
</div>
</div>
<div class="cmd cmd-op">
<div class="opcmd-heading">
<span class="opcmd" id="opcmd-traceroute-destination">
traceroute &lt;destination&gt;</span>
<a class="cmdlink" href="#opcmd-traceroute-destination" title="Permalink to this Command"></a></div><div class="opcmd-body">
<p>Trace path to target.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>vyos@vyos:~$ traceroute
Possible completions:
  &lt;hostname&gt;    Track network path to specified node
  &lt;x.x.x.x&gt;
  &lt;h:h:h:h:h:h:h:h&gt;
  ipv4          Track network path to &lt;hostname|IPv4 address&gt;
  ipv6          Track network path to &lt;hostname|IPv6 address&gt;
</pre></div>
</div>
</div>
</div>
</section>
<section id="advanced-connectivity-tests">
<h3>Advanced Connectivity Tests<a class="headerlink" href="#advanced-connectivity-tests" title="Link to this heading"></a></h3>
<div class="cmd cmd-op">
<div class="opcmd-heading">
<span class="opcmd" id="opcmd-monitor-traceroute-destination">
monitor traceroute &lt;destination&gt;</span>
<a class="cmdlink" href="#opcmd-monitor-traceroute-destination" title="Permalink to this Command"></a></div><div class="opcmd-body">
<p>However, another helper is available which combines ping and traceroute
into a single tool. An example of its output is shown:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>vyos@vyos:~$ mtr 10.62.212.12

                           My traceroute  [v0.85]
vyos (0.0.0.0)
Keys:  Help   Display mode   Restart statistics   Order of fields   quit
                                  Packets               Pings
Host                            Loss%   Snt   Last   Avg  Best  Wrst StDev
1. 10.11.110.4                   0.0%    34    0.5   0.5   0.4   0.8   0.1
2. 10.62.255.184                 0.0%    34    1.1   1.0   0.9   1.4   0.1
3. 10.62.255.71                  0.0%    34    1.4   1.4   1.3   2.0   0.1
4. 10.62.212.12                  0.0%    34    1.6   1.6   1.6   1.7   0.0
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The output consumes the screen and will replace your command
prompt.</p>
</div>
<p>Several options are available for changing the display output. Press <cite>h</cite> to
invoke the built in help system. To quit, just press <cite>q</cite> and you’ll be
returned to the VyOS command prompt.</p>
</div>
</div>
</section>
<section id="ipv6-topology-discovery">
<h3>IPv6 Topology Discovery<a class="headerlink" href="#ipv6-topology-discovery" title="Link to this heading"></a></h3>
<p>IPv6 uses different techniques to discover its Neighbors/topology.</p>
<section id="router-discovery">
<h4>Router Discovery<a class="headerlink" href="#router-discovery" title="Link to this heading"></a></h4>
<div class="cmd cmd-op">
<div class="opcmd-heading">
<span class="opcmd" id="opcmd-force-ipv6-rd-interface-interface-address-ipv6-address">
force ipv6-rd interface &lt;interface&gt; [address &lt;ipv6-address&gt;]</span>
<a class="cmdlink" href="#opcmd-force-ipv6-rd-interface-interface-address-ipv6-address" title="Permalink to this Command"></a></div><div class="opcmd-body">
<p>Discover routers via eth0.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>vyos@vyos:~$ force ipv6-rd interface eth0
Soliciting ff02::2 (ff02::2) on eth0...

Hop limit                 :           60 (      0x3c)
Stateful address conf.    :           No
Stateful other conf.      :           No
Mobile home agent         :           No
Router preference         :         high
Neighbor discovery proxy  :           No
Router lifetime           :         1800 (0x00000708) seconds
Reachable time            :  unspecified (0x00000000)
Retransmit time           :  unspecified (0x00000000)
 Prefix                   : 240e:fe:8ca7:ea01::/64
  On-link                 :          Yes
  Autonomous address conf.:          Yes
  Valid time              :      2592000 (0x00278d00) seconds
  Pref. time              :        14400 (0x00003840) seconds
 Prefix                   : fc00:470:f1cd:101::/64
  On-link                 :          Yes
  Autonomous address conf.:          Yes
  Valid time              :      2592000 (0x00278d00) seconds
  Pref. time              :        14400 (0x00003840) seconds
 Recursive DNS server     : fc00:470:f1cd::ff00
  DNS server lifetime     :          600 (0x00000258) seconds
 Source link-layer address: 00:98:2B:F8:3F:11
 from fe80::298:2bff:fef8:3f11
</pre></div>
</div>
</div>
</div>
</section>
<section id="neighbor-discovery">
<h4>Neighbor Discovery<a class="headerlink" href="#neighbor-discovery" title="Link to this heading"></a></h4>
<div class="cmd cmd-op">
<div class="opcmd-heading">
<span class="opcmd" id="opcmd-force-ipv6-nd-interface-interface-address-ipv6-address">
force ipv6-nd interface &lt;interface&gt; address &lt;ipv6-address&gt;</span>
<a class="cmdlink" href="#opcmd-force-ipv6-nd-interface-interface-address-ipv6-address" title="Permalink to this Command"></a></div><div class="opcmd-body">
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>vyos@vyos:~$ force ipv6-nd interface eth0 address fc00:470:f1cd:101::1

Soliciting fc00:470:f1cd:101::1 (fc00:470:f1cd:101::1) on eth0...
Target link-layer address: 00:98:2B:F8:3F:11 from fc00:470:f1cd:101::1
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="interface-names">
<h2>Interface names<a class="headerlink" href="#interface-names" title="Link to this heading"></a></h2>
<p>If you find the names of your interfaces have changed, this could be because
your MAC addresses have changed.</p>
<ul>
<li><p>For example, you have a VyOS VM with 4 Ethernet interfaces named
eth0, eth1, eth2 and eth3. Then, you migrate your VyOS VM to a different
host and find your interfaces now are eth4, eth5, eth6 and eth7.</p>
<p>One way to fix this issue <strong>taking control of the MAC addresses</strong> is:</p>
<p>Log into VyOS and run this command to display your interface settings.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>show interfaces detail
</pre></div>
</div>
<p>Take note of MAC addresses.</p>
<p>Now, in order to update a MAC address in the configuration, run this command
specifying the interface name and MAC address you want.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set interfaces eth0 hw-id 00:0c:29:da:a4:fe
</pre></div>
</div>
<p>If it is a VM, go into the settings of the host and set the MAC address to
the settings found in the config.boot file. You can also set the MAC to
static if the host allows so.</p>
</li>
<li><p>Another example could be when cloning VyOS VMs in GNS3 and you get into the
same issue: interface names have changed.</p>
<p>And <strong>a more generic way to fix it</strong> is just deleting every MAC address at
the configuration file of the cloned machine. They will be correctly
regenerated automatically.</p>
</li>
</ul>
</section>
<section id="monitoring">
<h2>Monitoring<a class="headerlink" href="#monitoring" title="Link to this heading"></a></h2>
<p>VyOS features several monitoring tools.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>vyos@vyos:~$ monitor
Possible completions:
  bandwidth     Monitor interface bandwidth in real time
  bandwidth-test
                Initiate or wait for bandwidth test
  cluster       Monitor clustering service
  command       Monitor an operational mode command (refreshes every 2 seconds)
  conntrack-sync
                Monitor conntrack-sync
  content-inspection
                Monitor Content-Inspection
  dhcp          Monitor Dynamic Host Control Protocol (DHCP)
  dns           Monitor a Domain Name Service (DNS) daemon
  firewall      Monitor Firewall
  https         Monitor the Secure Hypertext Transfer Protocol (HTTPS) service
  lldp          Monitor Link Layer Discovery Protocol (LLDP) daemon
  log           Monitor last lines of messages file
  nat           Monitor network address translation (NAT)
  ndp           Monitor the NDP information received by the router through the device
  openvpn       Monitor OpenVPN
  protocol      Monitor routing protocols
  snmp          Monitor Simple Network Management Protocol (SNMP) daemon
  stop-all      Stop all current background monitoring processes
  traceroute    Monitor the path to a destination in realtime
  traffic       Monitor traffic dumps
  vpn           Monitor VPN
  vrrp          Monitor Virtual Router Redundancy Protocol (VRRP)
  webproxy      Monitor Webproxy service
</pre></div>
</div>
<section id="traffic-dumps">
<h3>Traffic Dumps<a class="headerlink" href="#traffic-dumps" title="Link to this heading"></a></h3>
<p>To monitor interface traffic, issue the <code class="code docutils literal notranslate"><span class="pre">monitor</span> <span class="pre">traffic</span> <span class="pre">interface</span> <span class="pre">&lt;name&gt;</span></code>
command, replacing <cite>&lt;name&gt;</cite> with your chosen interface.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>vyos@vyos:~$ monitor traffic interface eth0
tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
listening on eth0, link-type EN10MB (Ethernet), capture size 262144 bytes
15:54:28.581601 IP 192.168.0.1 &gt; vyos: ICMP echo request, id 1870, seq 3848, length 64
15:54:28.581660 IP vyos &gt; 192.168.0.1: ICMP echo reply, id 1870, seq 3848, length 64
15:54:29.583399 IP 192.168.0.1 &gt; vyos: ICMP echo request, id 1870, seq 3849, length 64
15:54:29.583454 IP vyos &gt; 192.168.0.1: ICMP echo reply, id 1870, seq 3849, length 64
^C
4 packets captured
4 packets received by filter
0 packets dropped by kernel
vyos@vyos:~$
</pre></div>
</div>
<p>To quit monitoring, press <cite>Ctrl-c</cite> and you’ll be returned to the VyOS command
prompt.</p>
<p>Traffic can be filtered and saved.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>vyos@vyos:~$ monitor traffic interface eth0
Possible completions:
  &lt;Enter&gt;       Execute the current command
  filter        Monitor traffic matching filter conditions
  save          Save traffic dump from an interface to a file
</pre></div>
</div>
</section>
<section id="interface-bandwidth-usage">
<h3>Interface Bandwidth Usage<a class="headerlink" href="#interface-bandwidth-usage" title="Link to this heading"></a></h3>
<p>to take a quick view on the used bandwidth of an interface use the <code class="docutils literal notranslate"><span class="pre">monitor</span>
<span class="pre">bandwidth</span></code> command</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>vyos@vyos:~$ monitor bandwidth interface eth0
</pre></div>
</div>
<p>show the following:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>     B                      (RX Bytes/second)
198.00 .|....|.....................................................
165.00 .|....|.....................................................
132.00 ||..|.|.....................................................
 99.00 ||..|.|.....................................................
 66.00 |||||||.....................................................
 33.00 |||||||.....................................................
       1   5   10   15   20   25   30   35   40   45   50   55   60

   KiB                      (TX Bytes/second)
  3.67 ......|.....................................................
  3.06 ......|.....................................................
  2.45 ......|.....................................................
  1.84 ......|.....................................................
  1.22 ......|.....................................................
  0.61 :::::||.....................................................
       1   5   10   15   20   25   30   35   40   45   50   55   60
</pre></div>
</div>
</section>
<section id="interface-performance">
<h3>Interface Performance<a class="headerlink" href="#interface-performance" title="Link to this heading"></a></h3>
<p>To take a look on the network bandwidth between two nodes, the <code class="docutils literal notranslate"><span class="pre">monitor</span>
<span class="pre">bandwidth-test</span></code> command is used to run iperf.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>vyos@vyos:~$ monitor bandwidth-test
Possible completions:
  accept        Wait for bandwidth test connections (port TCP/5001)
  initiate      Initiate a bandwidth test
</pre></div>
</div>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">accept</span></code> command opens a listening iperf server on TCP Port 5001</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">initiate</span></code> command connects to that server to perform the test.</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>vyos@vyos:~$ monitor bandwidth-test initiate
Possible completions:
  &lt;hostname&gt;    Initiate a bandwidth test to specified host (port TCP/5001)
  &lt;x.x.x.x&gt;
  &lt;h:h:h:h:h:h:h:h&gt;
</pre></div>
</div>
</section>
<section id="monitor-command">
<h3>Monitor command<a class="headerlink" href="#monitor-command" title="Link to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">monitor</span> <span class="pre">command</span></code> command allows you to repeatedly run a command to view
a continuously refreshed output. The command is run and output every 2 seconds,
allowing you to monitor the output continuously without having to re-run the
command. This can be useful to follow routing adjacency formation.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>vyos@router:~$ monitor command &quot;show interfaces&quot;
</pre></div>
</div>
<p>Will clear the screen and show you the output of <code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">interfaces</span></code> every
2 seconds.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Every 2.0s: /opt/vyatta/bin/vyatta-op-cmd-wrapper    Sun Mar 26 02:49:46 2019

Codes: S - State, L - Link, u - Up, D - Down, A - Admin Down
Interface        IP Address                        S/L  Description
---------        ----------                        ---  -----------
eth0             192.168.1.1/24                    u/u
eth0.5           198.51.100.4/24                   u/u  WAN
lo               127.0.0.1/8                       u/u
                 ::1/128
vti0             172.25.254.2/30                   u/u
vti1             172.25.254.9/30                   u/u
</pre></div>
</div>
</section>
</section>
<section id="terminal-console">
<h2>Terminal/Console<a class="headerlink" href="#terminal-console" title="Link to this heading"></a></h2>
<p>Sometimes you need to clear counters or statistics to troubleshoot better.</p>
<p>To do this use the <code class="docutils literal notranslate"><span class="pre">clear</span></code> command in Operational mode.</p>
<p>to clear the console output</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>vyos@vyos:~$ clear console
</pre></div>
</div>
<p>to clear interface counters</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># clear all interfaces
vyos@vyos:~$ clear interface ethernet counters
# clear specific interface
vyos@vyos:~$ clear interface ethernet eth0 counters
</pre></div>
</div>
<p>The command follow the same logic as the <code class="docutils literal notranslate"><span class="pre">set</span></code> command in configuration mode.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># clear all counters of a interface type
vyos@vyos:~$ clear interface &lt;interface_type&gt; counters
# clear counter of a interface in interface_type
vyos@vyos:~$ clear interface &lt;interface_type&gt; &lt;interace_name&gt; counters
</pre></div>
</div>
<p>to clear counters on firewall rulesets or single rules</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>vyos@vyos:~$ clear firewall name &lt;ipv4 ruleset name&gt; counters
vyos@vyos:~$ clear firewall name &lt;ipv4 ruleset name&gt; rule &lt;rule#&gt; counters

vyos@vyos:~$ clear firewall ipv6-name &lt;ipv6 ruleset name&gt; counters
vyos@vyos:~$ clear firewall ipv6-name &lt;ipv6 ruleset name&gt; rule &lt;rule#&gt; counters
</pre></div>
</div>
</section>
<section id="system-information">
<h2>System Information<a class="headerlink" href="#system-information" title="Link to this heading"></a></h2>
<section id="boot-steps">
<span id="id2"></span><h3>Boot Steps<a class="headerlink" href="#boot-steps" title="Link to this heading"></a></h3>
<p>VyOS 1.2 uses <a class="reference external" href="https://www.debian.org/releases/jessie/">Debian Jessie</a> as the base Linux operating system. Jessie was
the first version of Debian that uses <a class="reference external" href="https://freedesktop.org/wiki/Software/systemd/">systemd</a> as the default init system.</p>
<p>These are the boot steps for VyOS 1.2</p>
<ol class="arabic simple">
<li><p>The BIOS loads Grub (or isolinux for the Live CD)</p></li>
<li><p>Grub then starts the Linux boot and loads the Linux Kernel <code class="docutils literal notranslate"><span class="pre">/boot/vmlinuz</span></code></p></li>
<li><p>Kernel Launches Systemd <code class="docutils literal notranslate"><span class="pre">/lib/systemd/systemd</span></code></p></li>
<li><p>Systemd loads the VyOS service file
<code class="docutils literal notranslate"><span class="pre">/lib/systemd/system/vyos-router.service</span></code></p></li>
<li><p>The service file launches the VyOS router init script
<code class="docutils literal notranslate"><span class="pre">/usr/libexec/vyos/init/vyos-router</span></code> - this is part of the <a class="reference external" href="https://github.com/vyos/vyatta-cfg">vyatta-cfg</a>
Debian package</p></li>
</ol>
<blockquote>
<div><ol class="arabic simple">
<li><p>Starts <a class="reference external" href="https://frrouting.org/">FRR</a> - successor to <a class="reference external" href="https://www.gnu.org/software/zebra/">GNU Zebra</a> and <a class="reference external" href="https://www.quagga.net/">Quagga</a></p></li>
<li><p>Initialises the boot configuration file - copies over
<code class="docutils literal notranslate"><span class="pre">config.boot.default</span></code> if there is no configuration</p></li>
<li><p>Runs the configuration migration, if the configuration is for an older
version of VyOS</p></li>
<li><p>Runs The pre-config script, if there is one
<code class="docutils literal notranslate"><span class="pre">/config/scripts/vyos-preconfig-bootup.script</span></code></p></li>
<li><p>If the config file was upgraded, runs any post upgrade scripts
<code class="docutils literal notranslate"><span class="pre">/config/scripts/post-upgrade.d</span></code></p></li>
<li><p>Starts <code class="docutils literal notranslate"><span class="pre">rl-system</span></code> and <code class="docutils literal notranslate"><span class="pre">firewall</span></code></p></li>
<li><p>Mounts the <code class="docutils literal notranslate"><span class="pre">/boot</span></code> partition</p></li>
<li><p>The boot configuration file is then applied by <code class="docutils literal notranslate"><span class="pre">/opt/vyatta/sbin/</span>
<span class="pre">vyatta-boot-config-loader/opt/vyatta/etc/config/config.boot</span></code></p></li>
</ol>
<blockquote>
<div><ol class="arabic simple">
<li><p>The config loader script writes log entries to
<code class="docutils literal notranslate"><span class="pre">/var/log/vyatta-config-loader.log</span></code></p></li>
</ol>
</div></blockquote>
<ol class="arabic simple" start="9">
<li><p>Runs <code class="docutils literal notranslate"><span class="pre">telinit</span> <span class="pre">q</span></code> to tell the init system to reload <code class="docutils literal notranslate"><span class="pre">/etc/inittab</span></code></p></li>
<li><p>Finally it runs the post-config script
<code class="docutils literal notranslate"><span class="pre">/config/scripts/vyos-postconfig-bootup.script</span></code></p></li>
</ol>
</div></blockquote>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../automation/vyos-govyos.html" class="btn btn-neutral float-left" title="go-vyos" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../configexamples/index.html" class="btn btn-neutral float-right" title="Configuration Blueprints" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../copyright.html">Copyright</a> 2024, VyOS maintainers and contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <head>
      <style>
          #branch-select-container {
              position: fixed;
              bottom: 10px;
              right: 10px;
              background-color: #f0f0f0;
              padding: 5px;
              border: 1px solid #ccc;
              border-radius: 5px;
          }
      </style>
  </head>
  <body>
      <div id="branch-select-container">
          <select id="branch-select">
              <option value="sagitta">Sagitta</option>
              <option value="circinus">Circinus</option>
          </select>
      </div>
      <script>
          // Define the branches
          const branches = ['sagitta', 'circinus'];
  
          // Get the current branch name from the URL
          const currentUrl = window.location.href;
          const currentBranch = branches.find(branch => currentUrl.includes(branch));
  
          // Set the selected option in the dropdown
          const branchSelect = document.getElementById('branch-select');
          branchSelect.value = currentBranch;
  
          // Add an event listener to the dropdown
          branchSelect.addEventListener('change', () => {
              const newBranch = branchSelect.value;
              const newUrl = currentUrl.replace(currentBranch, newBranch);
              window.location.href = newUrl;
          });
      </script>
  </body>


</body>
</html>