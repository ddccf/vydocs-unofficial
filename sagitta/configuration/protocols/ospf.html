

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OSPF &mdash; VyOS 1.4.x (sagitta) documentation</title>
      <link rel="stylesheet" type="text/css" href="../../static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="../../static/sphinx-design.min.css?v=95c83b7e" />

  
    <link rel="shortcut icon" href="../../static/vyos-logo-icon.png"/>
      <script src="../../static/jquery.js?v=5d32c60e"></script>
      <script src="../../static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../static/documentation_options.js?v=8f5ed1cd"></script>
      <script src="../../static/doctools.js?v=9bcbadda"></script>
      <script src="../../static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../static/design-tabs.js?v=f930bc37"></script>
    <script src="../../static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="next" title="PIM – Protocol Independent Multicast" href="pim.html" />
    <link rel="prev" title="Segment Routing" href="segment-routing.html" />
    <style>#vyos-header-iframe{position:fixed;top:0;left:0;right:0;z-index:999999999;width:100%;border:none}</style>
    <style>#vyos-footer-iframe{width:100%;border:none}</style>
    <link href="../../static/css/custom.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/lists.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/hints.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/headers.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/breadcrumbs.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/linkButtons.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/text.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/leftSidebar.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/scrolls.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/tables.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/installation/running-on-bare-metal.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/code-snippets.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/separate-commands.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/configuration/index.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/datatables.css" rel="stylesheet" type="text/css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Archivo:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script type="text/javascript" charset="utf8" src="../../static/js/datatables.js"></script>
    <script type="text/javascript" charset="utf8" src="../../static/js/tables.js"></script>
    <script type="text/javascript" charset="utf8" src="../../static/js/codecopier.js"></script>
    <script type="text/javascript" charset="utf8" src="../../static/js/sidebar.js"></script>
    <script type="text/javascript" charset="utf8" src="../../static/js/footer.js"></script>
    </script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            VyOS
              <img src="../../static/vyos-logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../introducing/about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../introducing/history.html">History</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog/index.html">Changelog</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">First Steps</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../installation/index.html">Installation and Image Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../quick-start.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cli.html">Command Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cli.html#configuration-overview">Configuration Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Adminguide</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Configuration Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../container/index.html">Container</a></li>
<li class="toctree-l2"><a class="reference internal" href="../firewall/index.html">Firewall</a></li>
<li class="toctree-l2"><a class="reference internal" href="../highavailability/index.html">High availability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interfaces/index.html">Interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../loadbalancing/index.html">Load-balancing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nat/index.html">NAT</a></li>
<li class="toctree-l2"><a class="reference internal" href="../policy/index.html">Policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pki/index.html">PKI</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Protocols</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="babel.html">Babel</a></li>
<li class="toctree-l3"><a class="reference internal" href="bfd.html">BFD</a></li>
<li class="toctree-l3"><a class="reference internal" href="bgp.html">BGP</a></li>
<li class="toctree-l3"><a class="reference internal" href="failover.html">Failover</a></li>
<li class="toctree-l3"><a class="reference internal" href="igmp-proxy.html">IGMP Proxy</a></li>
<li class="toctree-l3"><a class="reference internal" href="isis.html">IS-IS</a></li>
<li class="toctree-l3"><a class="reference internal" href="mpls.html">MPLS</a></li>
<li class="toctree-l3"><a class="reference internal" href="segment-routing.html">Segment Routing</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">OSPF</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#ospfv2-ipv4">OSPFv2 (IPv4)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ospfv3-ipv6">OSPFv3 (IPv6)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="pim.html">PIM – Protocol Independent Multicast</a></li>
<li class="toctree-l3"><a class="reference internal" href="pim6.html">PIM6 - Protocol Independent Multicast for IPv6</a></li>
<li class="toctree-l3"><a class="reference internal" href="rip.html">RIP</a></li>
<li class="toctree-l3"><a class="reference internal" href="rpki.html">RPKI</a></li>
<li class="toctree-l3"><a class="reference internal" href="static.html">Static</a></li>
<li class="toctree-l3"><a class="reference internal" href="static.html#arp">ARP</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../service/index.html">Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="../system/index.html">System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../trafficpolicy/index.html">Traffic Policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vpn/index.html">VPN</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vrf/index.html">VRF</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vrf/index.html#l3vpn-vrfs">L3VPN VRFs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../operation/index.html">Operation Mode</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../automation/index.html">VyOS Automation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshooting/index.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configexamples/index.html">Configuration Blueprints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configexamples/index.html#configuration-blueprints-autotest">Configuration Blueprints (autotest)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/build-vyos.html">Build VyOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/issues-features.html">Issues/Feature requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/upstream-packages.html">Upstream packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/testing.html">Testing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Misc</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../documentation.html">Write Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../coverage.html">Coverage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../copyright.html">Copyright Notice</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">VyOS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Configuration Guide</a></li>
          <li class="breadcrumb-item"><a href="index.html">Protocols</a></li>
      <li class="breadcrumb-item active">OSPF</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../sources/configuration/protocols/ospf.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="ospf">
<span id="routing-ospf"></span><h1>OSPF<a class="headerlink" href="#ospf" title="Link to this heading"></a></h1>
<p><abbr title="Open Shortest Path First">OSPF</abbr> is a routing protocol for Internet
Protocol (IP) networks. It uses a link state routing (LSR) algorithm and falls
into the group of interior gateway protocols (IGPs), operating within a single
autonomous system (AS). It is defined as OSPF Version 2 in <span class="target" id="index-0"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc2328.html"><strong>RFC 2328</strong></a> (1998)
for IPv4. Updates for IPv6 are specified as OSPF Version 3 in <span class="target" id="index-1"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc5340.html"><strong>RFC 5340</strong></a>
(2008). OSPF supports the <abbr title="Classless Inter-Domain Routing">CIDR</abbr>
addressing model.</p>
<p>OSPF is a widely used IGP in large enterprise networks.</p>
<section id="ospfv2-ipv4">
<h2>OSPFv2 (IPv4)<a class="headerlink" href="#ospfv2-ipv4" title="Link to this heading"></a></h2>
<section id="configuration">
<h3>Configuration<a class="headerlink" href="#configuration" title="Link to this heading"></a></h3>
<section id="general">
<h4>General<a class="headerlink" href="#general" title="Link to this heading"></a></h4>
<p>VyOS does not have a special command to start the OSPF process. The OSPF process
starts when the first ospf enabled interface is configured.</p>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-area-number-network-a-b-c-d-m">
set protocols ospf area &lt;number&gt; network &lt;A.B.C.D/M&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-area-number-network-a-b-c-d-m" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command specifies the OSPF enabled interface(s). If the interface has
an address from defined range then the command enables OSPF on this
interface so router can provide network information to the other ospf
routers via this interface.</p>
<p>This command is also used to enable the OSPF process. The area number can be
specified in decimal notation in the range from 0 to 4294967295. Or it
can be specified in dotted decimal notation similar to ip address.</p>
<p>Prefix length in interface must be equal or bigger (i.e. smaller network)
than prefix length in network statement. For example statement above doesn’t
enable ospf on interface with address 192.168.1.1/23, but it does on
interface with address 192.168.1.129/25.</p>
<p>In some cases it may be more convenient to enable OSPF on a per
interface/subnet
basis <code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">protocols</span> <span class="pre">ospf</span> <span class="pre">interface</span> <span class="pre">&lt;interface&gt;</span> <span class="pre">area</span> <span class="pre">&lt;x.x.x.x</span> <span class="pre">|</span> <span class="pre">x&gt;</span></code></p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-auto-cost-reference-bandwidth-number">
set protocols ospf auto-cost reference-bandwidth &lt;number&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-auto-cost-reference-bandwidth-number" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command sets the reference bandwidth for cost calculations, where
bandwidth can be in range from 1 to 4294967, specified in Mbits/s. The
default is 100Mbit/s (i.e. a link of bandwidth 100Mbit/s or higher will
have a cost of 1. Cost of lower bandwidth links will be scaled with
reference to this cost).</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-parameters-router-id-rid">
set protocols ospf parameters router-id &lt;rid&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-parameters-router-id-rid" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command sets the router-ID of the OSPF process. The router-ID may be an
IP address of the router, but need not be – it can be any arbitrary 32bit
number. However it MUST be unique within the entire OSPF domain to the OSPF
speaker – bad things will happen if multiple OSPF speakers are configured
with the same router-ID!</p>
</div>
</div>
</section>
<section id="optional">
<h4>Optional<a class="headerlink" href="#optional" title="Link to this heading"></a></h4>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-default-information-originate-always-metric-number-metric-type-1-2-route-map-name">
set protocols ospf default-information originate [always] [metric &lt;number&gt;] [metric-type &lt;1|2&gt;] [route-map &lt;name&gt;]</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-default-information-originate-always-metric-number-metric-type-1-2-route-map-name" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>Originate an AS-External (type-5) LSA describing a default route into all
external-routing capable areas, of the specified metric and metric type.
If the <code class="docutils literal notranslate"><span class="pre">always</span></code> keyword is given then the default is always
advertised, even when there is no default present in the routing table.
The argument <code class="docutils literal notranslate"><span class="pre">route-map</span></code> specifies to advertise the default route
if the route map is satisfied.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-distance-global-distance">
set protocols ospf distance global &lt;distance&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-distance-global-distance" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command change distance value of OSPF globally.
The distance range is 1 to 255.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-distance-ospf-external-inter-area-intra-area-distance">
set protocols ospf distance ospf &lt;external|inter-area|intra-area&gt; &lt;distance&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-distance-ospf-external-inter-area-intra-area-distance" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command change distance value of OSPF. The arguments are the distance
values for external routes, inter-area routes and intra-area routes
respectively. The distance range is 1 to 255.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Routes with a distance of 255 are effectively disabled and not
installed into the kernel.</p>
</div>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-log-adjacency-changes-detail">
set protocols ospf log-adjacency-changes [detail]</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-log-adjacency-changes-detail" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command allows to log changes in adjacency. With the optional
<code class="docutils literal notranslate"><span class="pre">detail</span></code> argument, all changes in adjacency status are shown.
Without <code class="docutils literal notranslate"><span class="pre">detail</span></code>, only changes to full or regressions are shown.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-max-metric-router-lsa-administrative-on-shutdown-seconds-on-startup-seconds">
set protocols ospf max-metric router-lsa &lt;administrative|on-shutdown &lt;seconds&gt;|on-startup &lt;seconds&gt;&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-max-metric-router-lsa-administrative-on-shutdown-seconds-on-startup-seconds" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This enables <span class="target" id="index-2"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc3137.html"><strong>RFC 3137</strong></a> support, where the OSPF process describes its
transit links in its router-LSA as having infinite distance so that other
routers will avoid calculating transit paths through the router while
still being able to reach networks through the router.</p>
<p>This support may be enabled administratively (and indefinitely) with the
<code class="docutils literal notranslate"><span class="pre">administrative</span></code> command. It may also be enabled conditionally.
Conditional enabling of max-metric router-lsas can be for a period of
seconds after startup with the <code class="docutils literal notranslate"><span class="pre">on-startup</span> <span class="pre">&lt;seconds&gt;</span></code> command
and/or for a period of seconds prior to shutdown with the
<code class="docutils literal notranslate"><span class="pre">on-shutdown</span> <span class="pre">&lt;seconds&gt;</span></code> command. The time range is 5 to 86400.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-parameters-abr-type-cisco-ibm-shortcut-standard">
set protocols ospf parameters abr-type &lt;cisco|ibm|shortcut|standard&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-parameters-abr-type-cisco-ibm-shortcut-standard" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command selects ABR model. OSPF router supports four ABR models:</p>
<p><strong>cisco</strong> – a router will be considered as ABR if it has several configured
links to the networks in different areas one of which is a backbone area.
Moreover, the link to the backbone area should be active (working).
<strong>ibm</strong> – identical to “cisco” model but in this case a backbone area link
may not be active.
<strong>standard</strong> – router has several active links to different areas.
<strong>shortcut</strong> – identical to “standard” but in this model a router is
allowed to use a connected areas topology without involving a backbone
area for inter-area connections.</p>
<p>Detailed information about “cisco” and “ibm” models differences can be
found in <span class="target" id="index-3"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc3509.html"><strong>RFC 3509</strong></a>. A “shortcut” model allows ABR to create routes
between areas based on the topology of the areas connected to this router
but not using a backbone area in case if non-backbone route will be
cheaper. For more information about “shortcut” model,
see <cite>ospf-shortcut-abr-02.txt</cite></p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-parameters-rfc1583-compatibility">
set protocols ospf parameters rfc1583-compatibility</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-parameters-rfc1583-compatibility" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p><span class="target" id="index-4"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc2328.html"><strong>RFC 2328</strong></a>, the successor to <span class="target" id="index-5"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc1583.html"><strong>RFC 1583</strong></a>, suggests according to section
G.2 (changes) in section 16.4.1 a change to the path preference algorithm
that prevents possible routing loops that were possible in the old version
of OSPFv2. More specifically it demands that inter-area paths and
intra-area backbone path are now of equal preference but still both
preferred to external paths.</p>
<p>This command should NOT be set normally.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-interface-interface-passive-disable">
set protocols ospf interface &lt;interface&gt; passive [disable]</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-interface-interface-passive-disable" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command specifies interface as passive. Passive interface advertises
its address, but does not run the OSPF protocol (adjacencies are not formed
and hello packets are not generated).</p>
<p>The optional <cite>disable</cite> option allows to exclude interface from passive state.
This command is used if the command <code class="docutils literal notranslate"><span class="pre">passive-interface</span> <span class="pre">default</span></code> was
configured.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-passive-interface-default">
set protocols ospf passive-interface default</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-passive-interface-default" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command specifies all interfaces as passive by default. Because this
command changes the configuration logic to a default passive; therefore,
interfaces where router adjacencies are expected need to be configured
by setting the <code class="docutils literal notranslate"><span class="pre">passive</span> <span class="pre">disable</span></code> flag for the specific interface.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-maximum-paths-1-64">
set protocols ospf maximum-paths &lt;1-64&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-maximum-paths-1-64" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>Use this command to control the maximum number of equal cost paths to reach
a specific destination. The upper limit may differ if you change the value
of MULTIPATH_NUM during compilation. The default is MULTIPATH_NUM (64).</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-refresh-timers-seconds">
set protocols ospf refresh timers &lt;seconds&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-refresh-timers-seconds" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>The router automatically updates link-state information with its neighbors.
Only an obsolete information is updated which age has exceeded a specific
threshold. This parameter changes a threshold value, which by default is
1800 seconds (half an hour). The value is applied to the whole OSPF router.
The timer range is 10 to 1800.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-timers-throttle-spf-delay-initial-holdtime-max-holdtime-seconds">
set protocols ospf timers throttle spf &lt;delay|initial-holdtime|max-holdtime&gt; &lt;seconds&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-timers-throttle-spf-delay-initial-holdtime-max-holdtime-seconds" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command sets the initial delay, the initial-holdtime and the
maximum-holdtime between when SPF is calculated and the event which
triggered the calculation. The times are specified in milliseconds and must
be in the range of 0 to 600000 milliseconds. <code class="docutils literal notranslate"><span class="pre">delay</span></code> sets the
initial SPF schedule delay in milliseconds. The default value is 200 ms.
<code class="docutils literal notranslate"><span class="pre">initial-holdtime</span></code> sets the minimum hold time between two
consecutive SPF calculations. The default value is 1000 ms.
<code class="docutils literal notranslate"><span class="pre">max-holdtime</span></code> sets the maximum wait time between two
consecutive SPF calculations. The default value is 10000 ms.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-ldp-sync">
set protocols ospf ldp-sync</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-ldp-sync" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command will enable IGP-LDP synchronization globally for OSPF. This
requires for LDP to be functional. This is described in <span class="target" id="index-6"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc5443.html"><strong>RFC 5443</strong></a>. By
default all interfaces operational in OSPF are enabled for synchronization.
Loopbacks are exempt.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-ldp-sync-holddown-seconds">
set protocols ospf ldp-sync holddown &lt;seconds&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-ldp-sync-holddown-seconds" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command will change the hold down value globally for IGP-LDP
synchronization during convergence/interface flap events.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-capability-opaque">
set protocols ospf capability opaque</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-capability-opaque" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>ospfd supports Opaque LSA <span class="target" id="index-7"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc2370.html"><strong>RFC 2370</strong></a> as partial support for MPLS Traffic
Engineering LSAs. The opaque-lsa capability must be enabled in the
configuration.</p>
<p>An alternate command could be “mpls-te on” (Traffic Engineering)</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>FRR offers only partial support for some of the routing
protocol extensions that are used with MPLS-TE; it does not
support a complete RSVP-TE solution.</p>
</div>
</div>
</div>
</section>
<section id="area-configuration">
<h4>Area Configuration<a class="headerlink" href="#area-configuration" title="Link to this heading"></a></h4>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-area-number-area-type-stub">
set protocols ospf area &lt;number&gt; area-type stub</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-area-number-area-type-stub" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command specifies the area to be a Stub Area. That is, an area where
no router originates routes external to OSPF and hence an area where all
external routes are via the ABR(s). Hence, ABRs for such an area do not
need to pass AS-External LSAs (type-5) or ASBR-Summary LSAs (type-4) into
the area. They need only pass Network-Summary (type-3) LSAs into such an
area, along with a default-route summary.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-area-number-area-type-stub-no-summary">
set protocols ospf area &lt;number&gt; area-type stub no-summary</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-area-number-area-type-stub-no-summary" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command specifies the area to be a Totally Stub Area. In addition to
stub area limitations this area type prevents an ABR from injecting
Network-Summary (type-3) LSAs into the specified stub area. Only default
summary route is allowed.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-area-number-area-type-stub-default-cost-number">
set protocols ospf area &lt;number&gt; area-type stub default-cost &lt;number&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-area-number-area-type-stub-default-cost-number" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command sets the cost of default-summary LSAs announced to stubby
areas. The cost range is 0 to 16777215.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-area-number-area-type-nssa">
set protocols ospf area &lt;number&gt; area-type nssa</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-area-number-area-type-nssa" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command specifies the area to be a Not So Stubby Area. External
routing information is imported into an NSSA in Type-7 LSAs. Type-7 LSAs
are similar to Type-5 AS-external LSAs, except that they can only be
flooded into the NSSA. In order to further propagate the NSSA external
information, the Type-7 LSA must be translated to a Type-5 AS-external-LSA
by the NSSA ABR.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-area-number-area-type-nssa-no-summary">
set protocols ospf area &lt;number&gt; area-type nssa no-summary</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-area-number-area-type-nssa-no-summary" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command specifies the area to be a NSSA Totally Stub Area. ABRs for
such an area do not need to pass Network-Summary (type-3) LSAs (except the
default summary route), ASBR-Summary LSAs (type-4) and AS-External LSAs
(type-5) into the area. But Type-7 LSAs that convert to Type-5 at the NSSA
ABR are allowed.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-area-number-area-type-nssa-default-cost-number">
set protocols ospf area &lt;number&gt; area-type nssa default-cost &lt;number&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-area-number-area-type-nssa-default-cost-number" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command sets the default cost of LSAs announced to NSSA areas.
The cost range is 0 to 16777215.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-area-number-area-type-nssa-translate-always-candidate-never">
set protocols ospf area &lt;number&gt; area-type nssa translate &lt;always|candidate|never&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-area-number-area-type-nssa-translate-always-candidate-never" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>Specifies whether this NSSA border router will unconditionally translate
Type-7 LSAs into Type-5 LSAs. When role is Always, Type-7 LSAs are
translated into Type-5 LSAs regardless of the translator state of other
NSSA border routers. When role is Candidate, this router participates in
the translator election to determine if it will perform the translations
duties. When role is Never, this router will never translate Type-7 LSAs
into Type-5 LSAs.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-area-number-authentication-plaintext-password">
set protocols ospf area &lt;number&gt; authentication plaintext-password</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-area-number-authentication-plaintext-password" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command specifies that simple password authentication should be used
for the given area. The password must also be configured on a per-interface
basis.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-area-number-authentication-md5">
set protocols ospf area &lt;number&gt; authentication md5</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-area-number-authentication-md5" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command specify that OSPF packets must be authenticated with MD5 HMACs
within the given area. Keying material must also be configured on a
per-interface basis.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-area-number-range-a-b-c-d-m-cost-number">
set protocols ospf area &lt;number&gt; range &lt;A.B.C.D/M&gt; [cost &lt;number&gt;]</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-area-number-range-a-b-c-d-m-cost-number" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command summarizes intra area paths from specified area into one
summary-LSA (Type-3) announced to other areas. This command can be used
only in ABR and ONLY router-LSAs (Type-1) and network-LSAs (Type-2)
(i.e. LSAs with scope area) can be summarized. AS-external-LSAs (Type-5)
can’t be summarized - their scope is AS. The optional argument
<code class="docutils literal notranslate"><span class="pre">cost</span></code> specifies the aggregated link metric. The metric range is 0
to 16777215.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-area-number-range-a-b-c-d-m-not-advertise">
set protocols ospf area &lt;number&gt; range &lt;A.B.C.D/M&gt; not-advertise</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-area-number-range-a-b-c-d-m-not-advertise" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command instead of summarizing intra area paths filter them - i.e.
intra area paths from this range are not advertised into other areas.
This command makes sense in ABR only.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-area-number-export-list-acl-number">
set protocols ospf area &lt;number&gt; export-list &lt;acl_number&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-area-number-export-list-acl-number" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>Filter Type-3 summary-LSAs announced to other areas originated from
intra- area paths from specified area.
This command makes sense in ABR only.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-area-number-import-list-acl-number">
set protocols ospf area &lt;number&gt; import-list &lt;acl_number&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-area-number-import-list-acl-number" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>Same as export-list, but it applies to paths announced into specified
area as Type-3 summary-LSAs.
This command makes sense in ABR only.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-area-number-range-a-b-c-d-m-substitute-e-f-g-h-m">
set protocols ospf area &lt;number&gt; range &lt;A.B.C.D/M&gt; substitute &lt;E.F.G.H/M&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-area-number-range-a-b-c-d-m-substitute-e-f-g-h-m" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>One Type-3 summary-LSA with routing info &lt;E.F.G.H/M&gt; is announced into
backbone area if defined area contains at least one intra-area network
(i.e. described with router-LSA or network-LSA) from range &lt;A.B.C.D/M&gt;.
This command makes sense in ABR only.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-area-number-shortcut-default-disable-enable">
set protocols ospf area &lt;number&gt; shortcut &lt;default|disable|enable&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-area-number-shortcut-default-disable-enable" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This parameter allows to “shortcut” routes (non-backbone) for inter-area
routes. There are three modes available for routes shortcutting:</p>
<p><strong>default</strong> –  this area will be used for shortcutting only if ABR does not
have a link to the backbone area or this link was lost.
<strong>enable</strong> – the area will be used for shortcutting every time the route
that goes through it is cheaper.
<strong>disable</strong> – this area is never used by ABR for routes shortcutting.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-area-number-virtual-link-a-b-c-d">
set protocols ospf area &lt;number&gt; virtual-link &lt;A.B.C.D&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-area-number-virtual-link-a-b-c-d" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>Provides a backbone area coherence by virtual link establishment.</p>
<p>In general, OSPF protocol requires a backbone area (area 0) to be coherent
and fully connected. I.e. any backbone area router must have a route to any
other backbone area router. Moreover, every ABR must have a link to
backbone area. However, it is not always possible to have a physical link
to a backbone area. In this case between two ABR (one of them has a link to
the backbone area) in the area (not stub area) a virtual link is organized.</p>
<p>&lt;number&gt; – area identifier through which a virtual link goes.
&lt;A.B.C.D&gt; – ABR router-id with which a virtual link is established. Virtual
link must be configured on both routers.</p>
<p>Formally, a virtual link looks like a point-to-point network connecting two
ABR from one area one of which physically connected to a backbone area.
This pseudo-network is considered to belong to a backbone area.</p>
</div>
</div>
</section>
<section id="interface-configuration">
<h4>Interface Configuration<a class="headerlink" href="#interface-configuration" title="Link to this heading"></a></h4>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-interface-interface-area-x-x-x-x-x">
set protocols ospf interface &lt;interface&gt; area &lt;x.x.x.x | x&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-interface-interface-area-x-x-x-x-x" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>Enable ospf on an interface and set associated area.</p>
<p>If you have a lot of interfaces, and/or a lot of subnets, then enabling
OSPF via this command may result in a slight performance improvement.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-interface-interface-authentication-plaintext-password-text">
set protocols ospf interface &lt;interface&gt; authentication plaintext-password &lt;text&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-interface-interface-authentication-plaintext-password-text" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command sets OSPF authentication key to a simple password. After
setting, all OSPF packets are authenticated. Key has length up to 8 chars.</p>
<p>Simple text password authentication is insecure and deprecated in favour of
MD5 HMAC authentication.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-interface-interface-authentication-md5-key-id-id-md5-key-text">
set protocols ospf interface &lt;interface&gt; authentication md5 key-id &lt;id&gt; md5-key &lt;text&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-interface-interface-authentication-md5-key-id-id-md5-key-text" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command specifys that MD5 HMAC authentication must be used on this
interface. It sets OSPF authentication key to a cryptographic password.
Key-id identifies secret key used to create the message digest. This ID
is part of the protocol and must be consistent across routers on a link.
The key can be long up to 16 chars (larger strings will be truncated),
and is associated with the given key-id.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-interface-interface-bandwidth-number">
set protocols ospf interface &lt;interface&gt; bandwidth &lt;number&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-interface-interface-bandwidth-number" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command sets the interface bandwidth for cost calculations, where
bandwidth can be in range from 1 to 100000, specified in Mbits/s.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-interface-interface-cost-number">
set protocols ospf interface &lt;interface&gt; cost &lt;number&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-interface-interface-cost-number" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command sets link cost for the specified interface. The cost value is
set to router-LSA’s metric field and used for SPF calculation. The cost
range is 1 to 65535.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-interface-interface-dead-interval-number">
set protocols ospf interface &lt;interface&gt; dead-interval &lt;number&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-interface-interface-dead-interval-number" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>Set number of seconds for router Dead Interval timer value used for Wait
Timer and Inactivity Timer. This value must be the same for all routers
attached to a common network. The default value is 40 seconds. The
interval range is 1 to 65535.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-interface-interface-hello-multiplier-number">
set protocols ospf interface &lt;interface&gt; hello-multiplier &lt;number&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-interface-interface-hello-multiplier-number" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>The hello-multiplier specifies how many Hellos to send per second, from 1
(every second) to 10 (every 100ms). Thus one can have 1s convergence time
for OSPF. If this form is specified, then the hello-interval advertised in
Hello packets is set to 0 and the hello-interval on received Hello packets
is not checked, thus the hello-multiplier need NOT be the same across
multiple routers on a common link.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-interface-interface-hello-interval-number">
set protocols ospf interface &lt;interface&gt; hello-interval &lt;number&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-interface-interface-hello-interval-number" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>Set number of seconds for Hello Interval timer value. Setting this value,
Hello packet will be sent every timer value seconds on the specified
interface. This value must be the same for all routers attached to a
common network. The default value is 10 seconds. The interval range is 1
to 65535.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-interface-interface-bfd">
set protocols ospf interface &lt;interface&gt; bfd</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-interface-interface-bfd" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command enables <abbr title="Bidirectional Forwarding Detection">BFD</abbr> on
this OSPF link interface.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-interface-interface-mtu-ignore">
set protocols ospf interface &lt;interface&gt; mtu-ignore</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-interface-interface-mtu-ignore" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command disables check of the MTU value in the OSPF DBD packets. Thus,
use of this command allows the OSPF adjacency to reach the FULL state even
though there is an interface MTU mismatch between two OSPF routers.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-interface-interface-network-type">
set protocols ospf interface &lt;interface&gt; network &lt;type&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-interface-interface-network-type" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command allows to specify the distribution type for the network
connected to this interface:</p>
<p><strong>broadcast</strong> – broadcast IP addresses distribution.
<strong>non-broadcast</strong> – address distribution in NBMA networks topology.
<strong>point-to-multipoint</strong> – address distribution in point-to-multipoint
networks.
<strong>point-to-point</strong> – address distribution in point-to-point networks.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-interface-interface-priority-number">
set protocols ospf interface &lt;interface&gt; priority &lt;number&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-interface-interface-priority-number" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command sets Router Priority integer value. The router with the
highest priority will be more eligible to become Designated Router.
Setting the value to 0, makes the router ineligible to become
Designated Router. The default value is 1. The interval range is 0 to 255.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-interface-interface-retransmit-interval-number">
set protocols ospf interface &lt;interface&gt; retransmit-interval &lt;number&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-interface-interface-retransmit-interval-number" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command sets number of seconds for RxmtInterval timer value. This
value is used when retransmitting Database Description and Link State
Request packets if acknowledge was not received. The default value is 5
seconds. The interval range is 3 to 65535.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-interface-interface-transmit-delay-number">
set protocols ospf interface &lt;interface&gt; transmit-delay &lt;number&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-interface-interface-transmit-delay-number" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command sets number of seconds for InfTransDelay value. It allows to
set and adjust for each interface the delay interval before starting the
synchronizing process of the router’s database with all neighbors. The
default value is 1 seconds. The interval range is 3 to 65535.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-interface-interface-ldp-sync-disable">
set protocols ospf interface &lt;interface&gt; ldp-sync disable</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-interface-interface-ldp-sync-disable" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command disables IGP-LDP sync for this specific interface.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-interface-interface-ldp-sync-holddown-seconds">
set protocols ospf interface &lt;interface&gt; ldp-sync holddown  &lt;seconds&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-interface-interface-ldp-sync-holddown-seconds" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command will change the hold down value for IGP-LDP synchronization
during convergence/interface flap events, but for this interface only.</p>
</div>
</div>
</section>
<section id="external-route-summarisation">
<h4>External Route Summarisation<a class="headerlink" href="#external-route-summarisation" title="Link to this heading"></a></h4>
<p>This feature summarises originated external LSAs (Type-5 and Type-7). Summary
Route will be originated on-behalf of all matched external LSAs.</p>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-aggregation-timer-seconds">
set protocols ospf aggregation timer &lt;seconds&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-aggregation-timer-seconds" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>Configure aggregation delay timer interval.</p>
<p>Summarisation starts only after this delay timer expiry.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-summary-address-x-x-x-x-y-tag-1-4294967295">
set protocols ospf summary-address x.x.x.x/y [tag (1-4294967295)]</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-summary-address-x-x-x-x-y-tag-1-4294967295" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command enable/disables summarisation for the configured address range.</p>
<p>Tag is the optional parameter. If tag configured Summary route will be
originated with the configured tag.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-summary-address-x-x-x-x-y-no-advertise">
set protocols ospf summary-address x.x.x.x/y no-advertise</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-summary-address-x-x-x-x-y-no-advertise" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command to ensure not advertise the summary lsa for the matched
external LSAs.</p>
</div>
</div>
</section>
<section id="graceful-restart">
<h4>Graceful Restart<a class="headerlink" href="#graceful-restart" title="Link to this heading"></a></h4>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-graceful-restart-grace-period-1-1800">
set protocols ospf graceful-restart [grace-period (1-1800)]</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-graceful-restart-grace-period-1-1800" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>Configure Graceful Restart <span class="target" id="index-8"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc3623.html"><strong>RFC 3623</strong></a> restarting support. When enabled,
the default grace period is 120 seconds.</p>
<p>To perform a graceful shutdown, the FRR <code class="docutils literal notranslate"><span class="pre">graceful-restart</span> <span class="pre">prepare</span> <span class="pre">ip</span>
<span class="pre">ospf</span></code> EXEC-level command needs to be issued before restarting the
ospfd daemon.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-graceful-restart-helper-enable-router-id-a-b-c-d">
set protocols ospf graceful-restart helper enable [router-id A.B.C.D]</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-graceful-restart-helper-enable-router-id-a-b-c-d" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>Configure Graceful Restart <span class="target" id="index-9"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc3623.html"><strong>RFC 3623</strong></a> helper support. By default, helper support
is disabled for all neighbours. This config enables/disables helper support
on this router for all neighbours.</p>
<p>To enable/disable helper support for a specific neighbour, the router-id
(A.B.C.D) has to be specified.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-graceful-restart-helper-no-strict-lsa-checking">
set protocols ospf graceful-restart helper no-strict-lsa-checking</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-graceful-restart-helper-no-strict-lsa-checking" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>By default <cite>strict-lsa-checking</cite> is configured then the helper will abort
the Graceful Restart when a LSA change occurs which affects the restarting
router.</p>
<p>This command disables it.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-graceful-restart-helper-supported-grace-time">
set protocols ospf graceful-restart helper supported-grace-time</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-graceful-restart-helper-supported-grace-time" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>Supports as HELPER for configured grace period.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-graceful-restart-helper-planned-only">
set protocols ospf graceful-restart helper planned-only</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-graceful-restart-helper-planned-only" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>It helps to support as HELPER only for planned restarts.</p>
<p>By default, it supports both planned and unplanned outages.</p>
</div>
</div>
</section>
<section id="manual-neighbor-configuration">
<h4>Manual Neighbor Configuration<a class="headerlink" href="#manual-neighbor-configuration" title="Link to this heading"></a></h4>
<p>OSPF routing devices normally discover their neighbors dynamically by
listening to the broadcast or multicast hello packets on the network.
Because an NBMA network does not support broadcast (or multicast), the
device cannot discover its neighbors dynamically, so you must configure all
the neighbors statically.</p>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-neighbor-a-b-c-d">
set protocols ospf neighbor &lt;A.B.C.D&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-neighbor-a-b-c-d" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command specifies the IP address of the neighboring device.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-neighbor-a-b-c-d-poll-interval-seconds">
set protocols ospf neighbor &lt;A.B.C.D&gt; poll-interval &lt;seconds&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-neighbor-a-b-c-d-poll-interval-seconds" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command specifies the length of time, in seconds, before the routing
device sends hello packets out of the interface before it establishes
adjacency with a neighbor. The range is 1 to 65535 seconds. The default
value is 60 seconds.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-neighbor-a-b-c-d-priority-number">
set protocols ospf neighbor &lt;A.B.C.D&gt; priority &lt;number&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-neighbor-a-b-c-d-priority-number" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command specifies the router priority value of the nonbroadcast
neighbor associated with the IP address specified. The default is 0.
This keyword does not apply to point-to-multipoint interfaces.</p>
</div>
</div>
</section>
<section id="redistribution-configuration">
<h4>Redistribution Configuration<a class="headerlink" href="#redistribution-configuration" title="Link to this heading"></a></h4>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-redistribute-route-source">
set protocols ospf redistribute &lt;route source&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-redistribute-route-source" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command redistributes routing information from the given route source
to the OSPF process. There are five modes available for route source: bgp,
connected, kernel, rip, static.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-default-metric-number">
set protocols ospf default-metric &lt;number&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-default-metric-number" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command specifies the default metric value of redistributed routes.
The metric range is 0 to 16777214.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-redistribute-route-source-metric-number">
set protocols ospf redistribute &lt;route source&gt; metric &lt;number&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-redistribute-route-source-metric-number" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command specifies metric for redistributed routes from the given
route source. There are five modes available for route source: bgp,
connected, kernel, rip, static. The metric range is 1 to 16777214.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-redistribute-route-source-metric-type-1-2">
set protocols ospf redistribute &lt;route source&gt; metric-type &lt;1|2&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-redistribute-route-source-metric-type-1-2" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command specifies metric type for redistributed routes. Difference
between two metric types that metric type 1 is a metric which is
“commensurable” with inner OSPF links. When calculating a metric to the
external destination, the full path metric is calculated as a metric sum
path of a router which had advertised this link plus the link metric.
Thus, a route with the least summary metric will be selected. If external
link is advertised with metric type 2 the path is selected which lies
through the router which advertised this link with the least metric
despite of the fact that internal path to this router is longer (with more
cost). However, if two routers advertised an external link and with metric
type 2 the preference is given to the path which lies through the router
with a shorter internal path. If two different routers advertised two
links to the same external destimation but with different metric type,
metric type 1 is preferred. If type of a metric left undefined the router
will consider these external links to have a default metric type 2.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-redistribute-route-source-route-map-name">
set protocols ospf redistribute &lt;route source&gt; route-map &lt;name&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-redistribute-route-source-route-map-name" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command allows to use route map to filter redistributed routes from
the given route source. There are five modes available for route source:
bgp, connected, kernel, rip, static.</p>
</div>
</div>
</section>
<section id="operational-mode-commands">
<h4>Operational Mode Commands<a class="headerlink" href="#operational-mode-commands" title="Link to this heading"></a></h4>
<div class="cmd cmd-op">
<div class="opcmd-heading">
<span class="opcmd" id="opcmd-show-ip-ospf-neighbor">
show ip ospf neighbor</span>
<a class="cmdlink" href="#opcmd-show-ip-ospf-neighbor" title="Permalink to this Command"></a></div><div class="opcmd-body">
<p>This command displays the neighbors status.</p>
</div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Neighbor ID     Pri State           Dead Time Address         Interface                        RXmtL RqstL DBsmL
10.0.13.1         1 Full/DR           38.365s 10.0.13.1       eth0:10.0.13.3                       0     0     0
10.0.23.2         1 Full/Backup       39.175s 10.0.23.2       eth1:10.0.23.3                       0     0     0
</pre></div>
</div>
<div class="cmd cmd-op">
<div class="opcmd-heading">
<span class="opcmd" id="opcmd-show-ip-ospf-neighbor-detail">
show ip ospf neighbor detail</span>
<a class="cmdlink" href="#opcmd-show-ip-ospf-neighbor-detail" title="Permalink to this Command"></a></div><div class="opcmd-body">
<p>This command displays the neighbors information in a detailed form, not
just a summary table.</p>
</div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span> Neighbor 10.0.13.1, interface address 10.0.13.1
    In the area 0.0.0.0 via interface eth0
    Neighbor priority is 1, State is Full, 5 state changes
    Most recent state change statistics:
      Progressive change 11m55s ago
    DR is 10.0.13.1, BDR is 10.0.13.3
    Options 2 *|-|-|-|-|-|E|-
    Dead timer due in 34.854s
    Database Summary List 0
    Link State Request List 0
    Link State Retransmission List 0
    Thread Inactivity Timer on
    Thread Database Description Retransmision off
    Thread Link State Request Retransmission on
    Thread Link State Update Retransmission on

Neighbor 10.0.23.2, interface address 10.0.23.2
   In the area 0.0.0.1 via interface eth1
   Neighbor priority is 1, State is Full, 4 state changes
   Most recent state change statistics:
     Progressive change 41.193s ago
   DR is 10.0.23.3, BDR is 10.0.23.2
   Options 2 *|-|-|-|-|-|E|-
   Dead timer due in 35.661s
   Database Summary List 0
   Link State Request List 0
   Link State Retransmission List 0
   Thread Inactivity Timer on
   Thread Database Description Retransmision off
   Thread Link State Request Retransmission on
   Thread Link State Update Retransmission on
</pre></div>
</div>
<div class="cmd cmd-op">
<div class="opcmd-heading">
<span class="opcmd" id="opcmd-show-ip-ospf-neighbor-a-b-c-d">
show ip ospf neighbor &lt;A.B.C.D&gt;</span>
<a class="cmdlink" href="#opcmd-show-ip-ospf-neighbor-a-b-c-d" title="Permalink to this Command"></a></div><div class="opcmd-body">
<p>This command displays the neighbors information in a detailed form for a
neighbor whose IP address is specified.</p>
</div>
</div>
<div class="cmd cmd-op">
<div class="opcmd-heading">
<span class="opcmd" id="opcmd-show-ip-ospf-neighbor-interface">
show ip ospf neighbor &lt;interface&gt;</span>
<a class="cmdlink" href="#opcmd-show-ip-ospf-neighbor-interface" title="Permalink to this Command"></a></div><div class="opcmd-body">
<p>This command displays the neighbors status for a neighbor on the specified
interface.</p>
</div>
</div>
<div class="cmd cmd-op">
<div class="opcmd-heading">
<span class="opcmd" id="opcmd-show-ip-ospf-interface-interface">
show ip ospf interface [&lt;interface&gt;]</span>
<a class="cmdlink" href="#opcmd-show-ip-ospf-interface-interface" title="Permalink to this Command"></a></div><div class="opcmd-body">
<p>This command displays state and configuration of OSPF the specified
interface, or all interfaces if no interface is given.</p>
</div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>eth0 is up
  ifindex 2, MTU 1500 bytes, BW 4294967295 Mbit &lt;UP,BROADCAST,RUNNING,MULTICAST&gt;
  Internet Address 10.0.13.3/24, Broadcast 10.0.13.255, Area 0.0.0.0
  MTU mismatch detection: enabled
  Router ID 10.0.23.3, Network Type BROADCAST, Cost: 1
  Transmit Delay is 1 sec, State Backup, Priority 1
  Backup Designated Router (ID) 10.0.23.3, Interface Address 10.0.13.3
  Multicast group memberships: OSPFAllRouters OSPFDesignatedRouters
  Timer intervals configured, Hello 10s, Dead 40s, Wait 40s, Retransmit 5
    Hello due in 4.470s
  Neighbor Count is 1, Adjacent neighbor count is 1
eth1 is up
  ifindex 3, MTU 1500 bytes, BW 4294967295 Mbit &lt;UP,BROADCAST,RUNNING,MULTICAST&gt;
  Internet Address 10.0.23.3/24, Broadcast 10.0.23.255, Area 0.0.0.1
  MTU mismatch detection: enabled
  Router ID 10.0.23.3, Network Type BROADCAST, Cost: 1
  Transmit Delay is 1 sec, State DR, Priority 1
  Backup Designated Router (ID) 10.0.23.2, Interface Address 10.0.23.2
  Saved Network-LSA sequence number 0x80000002
  Multicast group memberships: OSPFAllRouters OSPFDesignatedRouters
  Timer intervals configured, Hello 10s, Dead 40s, Wait 40s, Retransmit 5
    Hello due in 4.563s
  Neighbor Count is 1, Adjacent neighbor count is 1
</pre></div>
</div>
<div class="cmd cmd-op">
<div class="opcmd-heading">
<span class="opcmd" id="opcmd-show-ip-ospf-route-detail">
show ip ospf route [detail]</span>
<a class="cmdlink" href="#opcmd-show-ip-ospf-route-detail" title="Permalink to this Command"></a></div><div class="opcmd-body">
<p>This command displays the OSPF routing table, as determined by the most
recent SPF calculation. With the optional <code class="docutils literal notranslate"><span class="pre">detail</span></code> argument,
each route item’s advertiser router and network attribute will be shown.</p>
</div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>============ OSPF network routing table ============
N IA 10.0.12.0/24          [3] area: 0.0.0.0
                           via 10.0.13.3, eth0
N    10.0.13.0/24          [1] area: 0.0.0.0
                           directly attached to eth0
N IA 10.0.23.0/24          [2] area: 0.0.0.0
                           via 10.0.13.3, eth0
N    10.0.34.0/24          [2] area: 0.0.0.0
                           via 10.0.13.3, eth0

============ OSPF router routing table =============
R    10.0.23.3             [1] area: 0.0.0.0, ABR
                           via 10.0.13.3, eth0
R    10.0.34.4             [2] area: 0.0.0.0, ASBR
                           via 10.0.13.3, eth0

============ OSPF external routing table ===========
N E2 172.16.0.0/24         [2/20] tag: 0
                           via 10.0.13.3, eth0
</pre></div>
</div>
<p>The table consists of following data:</p>
<p><strong>OSPF network routing table</strong> – includes a list of acquired routes for all
accessible networks (or aggregated area ranges) of OSPF system. “IA” flag
means that route destination is in the area to which the router is not
connected, i.e. it’s an inter-area path. In square brackets a summary metric
for all links through which a path lies to this network is specified. “via”
prefix defines a router-gateway, i.e. the first router on the way to the
destination (next hop).
<strong>OSPF router routing table</strong> – includes a list of acquired routes to all
accessible ABRs and ASBRs.
<strong>OSPF external routing table</strong> – includes a list of acquired routes that are
external to the OSPF process. “E” flag points to the external link metric type
(E1 – metric type 1, E2 – metric type 2). External link metric is printed in
the “&lt;metric of the router which advertised the link&gt;/&lt;link metric&gt;” format.</p>
<div class="cmd cmd-op">
<div class="opcmd-heading">
<span class="opcmd" id="opcmd-show-ip-ospf-border-routers">
show ip ospf border-routers</span>
<a class="cmdlink" href="#opcmd-show-ip-ospf-border-routers" title="Permalink to this Command"></a></div><div class="opcmd-body">
<p>This command displays a table of paths to area boundary and autonomous
system boundary routers.</p>
</div>
</div>
<div class="cmd cmd-op">
<div class="opcmd-heading">
<span class="opcmd" id="opcmd-show-ip-ospf-database">
show ip ospf database</span>
<a class="cmdlink" href="#opcmd-show-ip-ospf-database" title="Permalink to this Command"></a></div><div class="opcmd-body">
<p>This command displays a summary table with a database contents (LSA).</p>
</div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>       OSPF Router with ID (10.0.13.1)

                Router Link States (Area 0.0.0.0)

Link ID         ADV Router      Age  Seq#       CkSum  Link count
10.0.13.1       10.0.13.1        984 0x80000005 0xd915 1
10.0.23.3       10.0.23.3       1186 0x80000008 0xfe62 2
10.0.34.4       10.0.34.4       1063 0x80000004 0x4e3f 1

                Net Link States (Area 0.0.0.0)

Link ID         ADV Router      Age  Seq#       CkSum
10.0.13.1       10.0.13.1        994 0x80000003 0x30bb
10.0.34.4       10.0.34.4       1188 0x80000001 0x9411

                Summary Link States (Area 0.0.0.0)

Link ID         ADV Router      Age  Seq#       CkSum  Route
10.0.12.0       10.0.23.3       1608 0x80000001 0x6ab6 10.0.12.0/24
10.0.23.0       10.0.23.3        981 0x80000003 0xe232 10.0.23.0/24

                AS External Link States

Link ID         ADV Router      Age  Seq#       CkSum  Route
172.16.0.0      10.0.34.4       1063 0x80000001 0xc40d E2 172.16.0.0/24 [0x0]
</pre></div>
</div>
<div class="cmd cmd-op">
<div class="opcmd-heading">
<span class="opcmd" id="opcmd-show-ip-ospf-database-type-a-b-c-d-adv-router-a-b-c-d-self-originate">
show ip ospf database &lt;type&gt; [A.B.C.D] [adv-router &lt;A.B.C.D&gt;|self-originate]</span>
<a class="cmdlink" href="#opcmd-show-ip-ospf-database-type-a-b-c-d-adv-router-a-b-c-d-self-originate" title="Permalink to this Command"></a></div><div class="opcmd-body">
<blockquote>
<div><p>This command displays a database contents for a specific link advertisement
type.</p>
<p>The type can be the following:
asbr-summary, external, network, nssa-external, opaque-area, opaque-as,
opaque-link, router, summary.</p>
<p>[A.B.C.D] – link-state-id. With this specified the command displays portion
of the network environment that is being described by the advertisement.
The value entered depends on the advertisement’s LS type. It must be
entered in the form of an IP address.</p>
<p><code class="docutils literal notranslate"><span class="pre">adv-router</span> <span class="pre">&lt;A.B.C.D&gt;</span></code> – router id, which link advertisements need
to be reviewed.</p>
<p><code class="docutils literal notranslate"><span class="pre">self-originate</span></code> displays only self-originated LSAs from the local
router.</p>
</div></blockquote>
</div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>        OSPF Router with ID (10.0.13.1)

              Router Link States (Area 0.0.0.0)

LS age: 1213
Options: 0x2  : *|-|-|-|-|-|E|-
LS Flags: 0x3
Flags: 0x0
LS Type: router-LSA
Link State ID: 10.0.13.1
Advertising Router: 10.0.13.1
LS Seq Number: 80000009
Checksum: 0xd119
Length: 36

 Number of Links: 1

  Link connected to: a Transit Network
   (Link ID) Designated Router address: 10.0.13.1
   (Link Data) Router Interface address: 10.0.13.1
   Number of TOS metrics: 0
     TOS 0 Metric: 1
</pre></div>
</div>
<div class="cmd cmd-op">
<div class="opcmd-heading">
<span class="opcmd" id="opcmd-show-ip-ospf-database-max-age">
show ip ospf database max-age</span>
<a class="cmdlink" href="#opcmd-show-ip-ospf-database-max-age" title="Permalink to this Command"></a></div><div class="opcmd-body">
<p>This command displays LSAs in MaxAge list.</p>
</div>
</div>
</section>
<section id="examples">
<h4>Examples<a class="headerlink" href="#examples" title="Link to this heading"></a></h4>
<section id="enable-ospf">
<h5>Enable OSPF<a class="headerlink" href="#enable-ospf" title="Link to this heading"></a></h5>
<p><strong>Node 1</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set interfaces loopback lo address 10.1.1.1/32
set interfaces ethernet eth0 address 192.168.0.1/24
set protocols ospf area 0 network 192.168.0.0/24
set protocols ospf area 0 network 10.1.1.1/32
set protocols ospf parameters router-id 10.1.1.1
</pre></div>
</div>
<p><strong>Node 2</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set interfaces loopback lo address 10.1.1.2/32
set interfaces ethernet eth0 address 192.168.0.2/24
set protocols ospf area 0 network 192.168.0.0/24
set protocols ospf area 0 network 10.1.1.2/32
set protocols ospf parameters router-id 10.1.1.2
</pre></div>
</div>
<p>Here’s the neighbors up:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Node-1@vyos:~$ show ip ospf neighbor

Neighbor ID     Pri State           Up Time         Dead Time Address         Interface                        RXmtL RqstL DBsmL
10.1.1.2          1 Full/DR         3m43s             36.094s 192.168.0.2     eth0:192.168.0.1                     0     0     0



Node-2@vyos:~$ show ip ospf neighbor

Neighbor ID     Pri State           Up Time         Dead Time Address         Interface                        RXmtL RqstL DBsmL
10.1.1.1          1 Full/Backup     3m47s             31.736s 192.168.0.1     eth0:192.168.0.2                     0     0     0
</pre></div>
</div>
<p>Here’s the routes:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Node-1@vyos:~$ show ip route ospf
Codes: K - kernel route, C - connected, S - static, R - RIP,
       O - OSPF, I - IS-IS, B - BGP, E - EIGRP, N - NHRP,
       T - Table, v - VNC, V - VNC-Direct, A - Babel, F - PBR,
       f - OpenFabric,
       &gt; - selected route, * - FIB route, q - queued, r - rejected, b - backup
       t - trapped, o - offload failure

O   10.1.1.1/32 [110/0] is directly connected, lo, weight 1, 00:00:14
O&gt;* 10.1.1.2/32 [110/1] via 192.168.0.2, eth0, weight 1, 00:00:07
O   192.168.0.0/24 [110/1] is directly connected, eth0, weight 1, 00:03:32

Node-2@vyos:~$ show ip route ospf
Codes: K - kernel route, C - connected, S - static, R - RIP,
       O - OSPF, I - IS-IS, B - BGP, E - EIGRP, N - NHRP,
       T - Table, v - VNC, V - VNC-Direct, A - Babel, F - PBR,
       f - OpenFabric,
       &gt; - selected route, * - FIB route, q - queued, r - rejected, b - backup
       t - trapped, o - offload failure

O&gt;* 10.1.1.1/32 [110/1] via 192.168.0.1, eth0, weight 1, 00:00:11
O   10.1.1.2/32 [110/0] is directly connected, lo, weight 1, 00:00:04
O   192.168.0.0/24 [110/1] is directly connected, eth0, weight 1, 00:03:18
</pre></div>
</div>
</section>
<section id="enable-ospf-with-route-redistribution-of-the-loopback-and-default-originate">
<h5>Enable OSPF with route redistribution of the loopback and default originate:<a class="headerlink" href="#enable-ospf-with-route-redistribution-of-the-loopback-and-default-originate" title="Link to this heading"></a></h5>
<p><strong>Node 1</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set interfaces loopback lo address 10.1.1.1/32
set protocols ospf area 0 network 192.168.0.0/24
set protocols ospf default-information originate always
set protocols ospf default-information originate metric 10
set protocols ospf default-information originate metric-type 2
set protocols ospf log-adjacency-changes
set protocols ospf parameters router-id 10.1.1.1
set protocols ospf redistribute connected metric-type 2
set protocols ospf redistribute connected route-map CONNECT

set policy route-map CONNECT rule 10 action permit
set policy route-map CONNECT rule 10 match interface lo
</pre></div>
</div>
<p><strong>Node 2</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set interfaces loopback lo address 10.2.2.2/32
set protocols ospf area 0 network 192.168.0.0/24
set protocols ospf log-adjacency-changes
set protocols ospf parameters router-id 10.2.2.2
set protocols ospf redistribute connected metric-type 2
set protocols ospf redistribute connected route-map CONNECT

set policy route-map CONNECT rule 10 action permit
set policy route-map CONNECT rule 10 match interface lo
</pre></div>
</div>
</section>
<section id="enable-ospf-and-igp-ldp-synchronization">
<h5>Enable OSPF and IGP-LDP synchronization:<a class="headerlink" href="#enable-ospf-and-igp-ldp-synchronization" title="Link to this heading"></a></h5>
<p><strong>Node 1:</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set interfaces loopback lo address 10.1.1.1/32
set interfaces ethernet eth0 address 192.168.0.1/24

set protocols ospf area 0 network &#39;192.168.0.0/24&#39;
set protocols ospf area 0 network &#39;10.1.1.1/32&#39;
set protocols ospf parameters router-id &#39;10.1.1.1&#39;
set protocols ospf ldp-sync

set protocols mpls interface eth0
set protocols mpls ldp discovery transport-ipv4-address 10.1.1.1
set protocols mpls ldp interface lo
set protocols mpls ldp interface eth0
set protocols mpls ldp parameters transport-prefer-ipv4
set protocols mpls ldp router-id 10.1.1.1
</pre></div>
</div>
<p>This gives us IGP-LDP synchronization for all non-loopback interfaces with
a holddown timer of zero seconds:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Node-1@vyos:~$ show ip ospf mpls ldp-sync
  eth0
  LDP-IGP Synchronization enabled: yes
  Holddown timer in seconds: 0
  State: Sync achieved
</pre></div>
</div>
</section>
<section id="enable-ospf-with-segment-routing-experimental">
<h5>Enable OSPF with Segment Routing (Experimental):<a class="headerlink" href="#enable-ospf-with-segment-routing-experimental" title="Link to this heading"></a></h5>
<p><strong>Node 1</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set interfaces loopback lo address 10.1.1.1/32
set interfaces ethernet eth0 address 192.168.0.1/24

set protocols ospf area 0 network &#39;192.168.0.0/24&#39;
set protocols ospf area 0 network &#39;10.1.1.1/32&#39;
set protocols ospf parameters opaque-lsa
set protocols ospf parameters router-id &#39;10.1.1.1&#39;
set protocols ospf segment-routing global-block high-label-value &#39;1100&#39;
set protocols ospf segment-routing global-block low-label-value &#39;1000&#39;
set protocols ospf segment-routing prefix 10.1.1.1/32 index explicit-null
set protocols ospf segment-routing prefix 10.1.1.1/32 index value &#39;1&#39;
</pre></div>
</div>
<p><strong>Node 2</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set interfaces loopback lo address 10.1.1.2/32
set interfaces ethernet eth0 address 192.168.0.2/24

set protocols ospf area 0 network &#39;192.168.0.0/24&#39;
set protocols ospf area 0 network &#39;10.1.1.2/32&#39;
set protocols ospf parameters opaque-lsa
set protocols ospf parameters router-id &#39;10.1.1.2&#39;
set protocols ospf segment-routing global-block high-label-value &#39;1100&#39;
set protocols ospf segment-routing global-block low-label-value &#39;1000&#39;
set protocols ospf segment-routing prefix 10.1.1.2/32 index explicit-null
set protocols ospf segment-routing prefix 10.1.1.2/32 index value &#39;2&#39;
</pre></div>
</div>
<p>This gives us MPLS segment routing enabled and labels for far end loopbacks:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Node-1@vyos:~$ show mpls table
 Inbound Label  Type       Nexthop      Outbound Label
 -----------------------------------------------------------
 1002           SR (OSPF)  192.168.0.2  IPv4 Explicit Null  &lt;-- Node-2 loopback learned on Node-1
 15000          SR (OSPF)  192.168.0.2  implicit-null
 15001          SR (OSPF)  192.168.0.2  implicit-null

Node-2@vyos:~$ show mpls table
 Inbound Label  Type       Nexthop      Outbound Label
 -----------------------------------------------------------
 1001           SR (OSPF)  192.168.0.1  IPv4 Explicit Null  &lt;-- Node-1 loopback learned on Node-2
 15000          SR (OSPF)  192.168.0.1  implicit-null
 15001          SR (OSPF)  192.168.0.1  implicit-null
</pre></div>
</div>
<p>Here is the routing tables showing the MPLS segment routing label operations:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Node-1@vyos:~$ show ip route ospf
Codes: K - kernel route, C - connected, S - static, R - RIP,
       O - OSPF, I - IS-IS, B - BGP, E - EIGRP, N - NHRP,
       T - Table, v - VNC, V - VNC-Direct, A - Babel, F - PBR,
       f - OpenFabric,
       &gt; - selected route, * - FIB route, q - queued, r - rejected, b - backup
       t - trapped, o - offload failure

O   10.1.1.1/32 [110/0] is directly connected, lo, weight 1, 00:03:43
O&gt;* 10.1.1.2/32 [110/1] via 192.168.0.2, eth0, label IPv4 Explicit Null, weight 1, 00:03:32
O   192.168.0.0/24 [110/1] is directly connected, eth0, weight 1, 00:03:43

Node-2@vyos:~$ show ip route ospf
Codes: K - kernel route, C - connected, S - static, R - RIP,
       O - OSPF, I - IS-IS, B - BGP, E - EIGRP, N - NHRP,
       T - Table, v - VNC, V - VNC-Direct, A - Babel, F - PBR,
       f - OpenFabric,
       &gt; - selected route, * - FIB route, q - queued, r - rejected, b - backup
       t - trapped, o - offload failure

O&gt;* 10.1.1.1/32 [110/1] via 192.168.0.1, eth0, label IPv4 Explicit Null, weight 1, 00:03:36
O   10.1.1.2/32 [110/0] is directly connected, lo, weight 1, 00:03:51
O   192.168.0.0/24 [110/1] is directly connected, eth0, weight 1, 00:03:51
</pre></div>
</div>
</section>
</section>
</section>
</section>
<section id="ospfv3-ipv6">
<span id="routing-ospfv3"></span><h2>OSPFv3 (IPv6)<a class="headerlink" href="#ospfv3-ipv6" title="Link to this heading"></a></h2>
<section id="ospf-v3-configuration">
<span id="id1"></span><h3>Configuration<a class="headerlink" href="#ospf-v3-configuration" title="Link to this heading"></a></h3>
<section id="ospf-v3-general">
<span id="id2"></span><h4>General<a class="headerlink" href="#ospf-v3-general" title="Link to this heading"></a></h4>
<p>VyOS does not have a special command to start the OSPFv3 process. The OSPFv3
process starts when the first ospf enabled interface is configured.</p>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospfv3-interface-interface-area-number">
set protocols ospfv3 interface &lt;interface&gt; area &lt;number&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospfv3-interface-interface-area-number" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command specifies the OSPFv3 enabled interface. This command is also
used to enable the OSPF process. The area number can be specified in
decimal notation in the range from 0 to 4294967295. Or it can be specified
in dotted decimal notation similar to ip address.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospfv3-parameters-router-id-rid">
set protocols ospfv3 parameters router-id &lt;rid&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospfv3-parameters-router-id-rid" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command sets the router-ID of the OSPFv3 process. The router-ID may be
an IP address of the router, but need not be – it can be any arbitrary
32bit number. However it MUST be unique within the entire OSPFv3 domain to
the OSPFv3 speaker – bad things will happen if multiple OSPFv3 speakers are
configured with the same router-ID!</p>
</div>
</div>
</section>
<section id="ospf-v3-optional">
<span id="id3"></span><h4>Optional<a class="headerlink" href="#ospf-v3-optional" title="Link to this heading"></a></h4>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospfv3-distance-global-distance">
set protocols ospfv3 distance global &lt;distance&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospfv3-distance-global-distance" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command change distance value of OSPFv3 globally.
The distance range is 1 to 255.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospfv3-distance-ospfv3-external-inter-area-intra-area-distance">
set protocols ospfv3 distance ospfv3 &lt;external|inter-area|intra-area&gt; &lt;distance&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospfv3-distance-ospfv3-external-inter-area-intra-area-distance" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command change distance value of OSPFv3. The arguments are the
distance values for external routes, inter-area routes and intra-area
routes respectively. The distance range is 1 to 255.</p>
</div>
</div>
</section>
<section id="ospf-v3-area-configuration">
<span id="id4"></span><h4>Area Configuration<a class="headerlink" href="#ospf-v3-area-configuration" title="Link to this heading"></a></h4>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospfv3-area-number-range-prefix">
set protocols ospfv3 area &lt;number&gt; range &lt;prefix&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospfv3-area-number-range-prefix" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command summarizes intra area paths from specified area into one
Type-3 Inter-Area Prefix LSA announced to other areas. This command can be
used only in ABR.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospfv3-area-number-range-prefix-not-advertise">
set protocols ospfv3 area &lt;number&gt; range &lt;prefix&gt; not-advertise</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospfv3-area-number-range-prefix-not-advertise" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command instead of summarizing intra area paths filter them - i.e.
intra area paths from this range are not advertised into other areas. This
command makes sense in ABR only.</p>
</div>
</div>
</section>
<section id="ospf-v3-interface-config">
<span id="id5"></span><h4>Interface Configuration<a class="headerlink" href="#ospf-v3-interface-config" title="Link to this heading"></a></h4>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospfv3-interface-interface-ipv6-cost-number">
set protocols ospfv3 interface &lt;interface&gt; ipv6 cost &lt;number&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospfv3-interface-interface-ipv6-cost-number" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command sets link cost for the specified interface. The cost value is
set to router-LSA’s metric field and used for SPF calculation. The cost
range is 1 to 65535.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospfv3-interface-interface-dead-interval-number">
set protocols ospfv3 interface &lt;interface&gt; dead-interval &lt;number&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospfv3-interface-interface-dead-interval-number" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>Set number of seconds for router Dead Interval timer value used for Wait
Timer and Inactivity Timer. This value must be the same for all routers
attached to a common network. The default value is 40 seconds. The
interval range is 1 to 65535.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospfv3-interface-interface-hello-interval-number">
set protocols ospfv3 interface &lt;interface&gt; hello-interval &lt;number&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospfv3-interface-interface-hello-interval-number" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>Set number of seconds for Hello Interval timer value. Setting this value,
Hello packet will be sent every timer value seconds on the specified
interface. This value must be the same for all routers attached to a
common network. The default value is 10 seconds. The interval range is 1
to 65535.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospfv3-interface-interface-mtu-ignore">
set protocols ospfv3 interface &lt;interface&gt; mtu-ignore</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospfv3-interface-interface-mtu-ignore" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command disables check of the MTU value in the OSPF DBD packets.
Thus, use of this command allows the OSPF adjacency to reach the FULL
state even though there is an interface MTU mismatch between two OSPF
routers.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospfv3-interface-interface-network-type">
set protocols ospfv3 interface &lt;interface&gt; network &lt;type&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospfv3-interface-interface-network-type" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command allows to specify the distribution type for the network
connected to this interface:</p>
<p><strong>broadcast</strong> – broadcast IP addresses distribution.
<strong>point-to-point</strong> – address distribution in point-to-point networks.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospfv3-interface-interface-priority-number">
set protocols ospfv3 interface &lt;interface&gt; priority &lt;number&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospfv3-interface-interface-priority-number" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command sets Router Priority integer value. The router with the
highest priority will be more eligible to become Designated Router.
Setting the value to 0, makes the router ineligible to become Designated
Router. The default value is 1. The interval range is 0 to 255.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospfv3-interface-interface-passive">
set protocols ospfv3 interface &lt;interface&gt; passive</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospfv3-interface-interface-passive" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command specifies interface as passive. Passive interface advertises
its address, but does not run the OSPF protocol (adjacencies are not formed
and hello packets are not generated).</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospfv3-interface-interface-retransmit-interval-number">
set protocols ospfv3 interface &lt;interface&gt; retransmit-interval &lt;number&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospfv3-interface-interface-retransmit-interval-number" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command sets number of seconds for RxmtInterval timer value. This
value is used when retransmitting Database Description and Link State
Request packets if acknowledge was not received. The default value is 5
seconds. The interval range is 3 to 65535.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospfv3-interface-interface-transmit-delay-number">
set protocols ospfv3 interface &lt;interface&gt; transmit-delay &lt;number&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospfv3-interface-interface-transmit-delay-number" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command sets number of seconds for InfTransDelay value. It allows to
set and adjust for each interface the delay interval before starting the
synchronizing process of the router’s database with all neighbors. The
default value is 1 seconds. The interval range is 3 to 65535.</p>
</div>
</div>
</section>
<section id="ospf-v3-graceful-restart">
<span id="id6"></span><h4>Graceful Restart<a class="headerlink" href="#ospf-v3-graceful-restart" title="Link to this heading"></a></h4>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospfv3-graceful-restart-grace-period-1-1800">
set protocols ospfv3 graceful-restart [grace-period (1-1800)]</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospfv3-graceful-restart-grace-period-1-1800" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>Configure Graceful Restart <span class="target" id="index-10"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc3623.html"><strong>RFC 3623</strong></a> restarting support. When enabled,
the default grace period is 120 seconds.</p>
<p>To perform a graceful shutdown, the FRR <code class="docutils literal notranslate"><span class="pre">graceful-restart</span> <span class="pre">prepare</span> <span class="pre">ip</span>
<span class="pre">ospf</span></code> EXEC-level command needs to be issued before restarting the
ospfd daemon.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospfv3-graceful-restart-helper-enable-router-id-a-b-c-d">
set protocols ospfv3 graceful-restart helper enable [router-id A.B.C.D]</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospfv3-graceful-restart-helper-enable-router-id-a-b-c-d" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>Configure Graceful Restart <span class="target" id="index-11"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc3623.html"><strong>RFC 3623</strong></a> helper support. By default, helper support
is disabled for all neighbours. This config enables/disables helper support
on this router for all neighbours.</p>
<p>To enable/disable helper support for a specific neighbour, the router-id
(A.B.C.D) has to be specified.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospfv3-graceful-restart-helper-lsa-check-disable">
set protocols ospfv3 graceful-restart helper lsa-check-disable</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospfv3-graceful-restart-helper-lsa-check-disable" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>By default <cite>strict-lsa-checking</cite> is configured then the helper will abort
the Graceful Restart when a LSA change occurs which affects the restarting
router.</p>
<p>This command disables it.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospfv3-graceful-restart-helper-supported-grace-time">
set protocols ospfv3 graceful-restart helper supported-grace-time</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospfv3-graceful-restart-helper-supported-grace-time" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>Supports as HELPER for configured grace period.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospfv3-graceful-restart-helper-planned-only">
set protocols ospfv3 graceful-restart helper planned-only</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospfv3-graceful-restart-helper-planned-only" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>It helps to support as HELPER only for planned restarts.</p>
<p>By default, it supports both planned and unplanned outages.</p>
</div>
</div>
</section>
<section id="ospf-v3-redistribution-config">
<span id="id7"></span><h4>Redistribution Configuration<a class="headerlink" href="#ospf-v3-redistribution-config" title="Link to this heading"></a></h4>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospfv3-redistribute-route-source">
set protocols ospfv3 redistribute &lt;route source&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospfv3-redistribute-route-source" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command redistributes routing information from the given route source
to the OSPFv3 process. There are five modes available for route source:
bgp, connected, kernel, ripng, static.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-protocols-ospf-redistribute-route-source-route-map-name">
set protocols ospf redistribute &lt;route source&gt; route-map &lt;name&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-protocols-ospf-redistribute-route-source-route-map-name" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>This command allows to use route map to filter redistributed routes from
given route source. There are five modes available for route source: bgp,
connected, kernel, ripng, static.</p>
</div>
</div>
</section>
<section id="ospf-v3-op-cmd">
<span id="id8"></span><h4>Operational Mode Commands<a class="headerlink" href="#ospf-v3-op-cmd" title="Link to this heading"></a></h4>
<div class="cmd cmd-op">
<div class="opcmd-heading">
<span class="opcmd" id="opcmd-show-ipv6-ospfv3-neighbor">
show ipv6 ospfv3 neighbor</span>
<a class="cmdlink" href="#opcmd-show-ipv6-ospfv3-neighbor" title="Permalink to this Command"></a></div><div class="opcmd-body">
<p>This command displays the neighbors status.</p>
</div>
</div>
<div class="cmd cmd-op">
<div class="opcmd-heading">
<span class="opcmd" id="opcmd-show-ipv6-ospfv3-neighbor-detail">
show ipv6 ospfv3 neighbor detail</span>
<a class="cmdlink" href="#opcmd-show-ipv6-ospfv3-neighbor-detail" title="Permalink to this Command"></a></div><div class="opcmd-body">
<p>This command displays the neighbors information in a detailed form, not
just a summary table.</p>
</div>
</div>
<div class="cmd cmd-op">
<div class="opcmd-heading">
<span class="opcmd" id="opcmd-show-ipv6-ospfv3-neighbor-drchoice">
show ipv6 ospfv3 neighbor drchoice</span>
<a class="cmdlink" href="#opcmd-show-ipv6-ospfv3-neighbor-drchoice" title="Permalink to this Command"></a></div><div class="opcmd-body">
<p>This command displays the neighbor DR choice information.</p>
</div>
</div>
<div class="cmd cmd-op">
<div class="opcmd-heading">
<span class="opcmd" id="opcmd-show-ipv6-ospfv3-interface-prefix-interface-prefix">
show ipv6 ospfv3 interface [prefix]|[&lt;interface&gt; [prefix]]</span>
<a class="cmdlink" href="#opcmd-show-ipv6-ospfv3-interface-prefix-interface-prefix" title="Permalink to this Command"></a></div><div class="opcmd-body">
<p>This command displays state and configuration of OSPF the specified
interface, or all interfaces if no interface is given. Whith the argument
<code class="docutils literal notranslate"><span class="pre">prefix</span></code> this command shows connected prefixes to advertise.</p>
</div>
</div>
<div class="cmd cmd-op">
<div class="opcmd-heading">
<span class="opcmd" id="opcmd-show-ipv6-ospfv3-route">
show ipv6 ospfv3 route</span>
<a class="cmdlink" href="#opcmd-show-ipv6-ospfv3-route" title="Permalink to this Command"></a></div><div class="opcmd-body">
<p>This command displays the OSPF routing table, as determined by the most
recent SPF calculation.</p>
</div>
</div>
<div class="cmd cmd-op">
<div class="opcmd-heading">
<span class="opcmd" id="opcmd-show-ipv6-ospfv3-border-routers">
show ipv6 ospfv3 border-routers</span>
<a class="cmdlink" href="#opcmd-show-ipv6-ospfv3-border-routers" title="Permalink to this Command"></a></div><div class="opcmd-body">
<p>This command displays a table of paths to area boundary and autonomous
system boundary routers.</p>
</div>
</div>
<div class="cmd cmd-op">
<div class="opcmd-heading">
<span class="opcmd" id="opcmd-show-ipv6-ospfv3-database">
show ipv6 ospfv3 database</span>
<a class="cmdlink" href="#opcmd-show-ipv6-ospfv3-database" title="Permalink to this Command"></a></div><div class="opcmd-body">
<p>This command displays a summary table with a database contents (LSA).</p>
</div>
</div>
<div class="cmd cmd-op">
<div class="opcmd-heading">
<span class="opcmd" id="opcmd-show-ipv6-ospfv3-database-type-a-b-c-d-adv-router-a-b-c-d-self-originate">
show ipv6 ospfv3 database &lt;type&gt; [A.B.C.D] [adv-router &lt;A.B.C.D&gt;|self-originate]</span>
<a class="cmdlink" href="#opcmd-show-ipv6-ospfv3-database-type-a-b-c-d-adv-router-a-b-c-d-self-originate" title="Permalink to this Command"></a></div><div class="opcmd-body">
<p>This command displays a database contents for a specific link
advertisement type.</p>
</div>
</div>
<div class="cmd cmd-op">
<div class="opcmd-heading">
<span class="opcmd" id="opcmd-show-ipv6-ospfv3-redistribute">
show ipv6 ospfv3 redistribute</span>
<a class="cmdlink" href="#opcmd-show-ipv6-ospfv3-redistribute" title="Permalink to this Command"></a></div><div class="opcmd-body">
<p>This command displays external information redistributed into OSPFv3</p>
</div>
</div>
</section>
<section id="configuration-example">
<span id="ospf-v3-config-example"></span><h4>Configuration Example<a class="headerlink" href="#configuration-example" title="Link to this heading"></a></h4>
<p>A typical configuration using 2 nodes.</p>
<p><strong>Node 1:</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set protocols ospfv3 interface eth1 area 0.0.0.0
set protocols ospfv3 area 0.0.0.0 range 2001:db8:1::/64
set protocols ospfv3 parameters router-id 192.168.1.1
set protocols ospfv3 redistribute connected
</pre></div>
</div>
<p><strong>Node 2:</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set protocols ospfv3 interface eth1 area 0.0.0.0
set protocols ospfv3 area 0.0.0.0 range 2001:db8:2::/64
set protocols ospfv3 parameters router-id 192.168.2.1
set protocols ospfv3 redistribute connected
</pre></div>
</div>
<p><strong>To see the redistributed routes:</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>show ipv6 ospfv3 redistribute
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You cannot easily redistribute IPv6 routes via OSPFv3 on a
WireGuard interface link. This requires you to configure link-local
addresses manually on the WireGuard interfaces, see <a class="reference external" href="https://vyos.dev/T1483">T1483</a>.</p>
</div>
<p>Example configuration for WireGuard interfaces:</p>
<p><strong>Node 1</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set interfaces wireguard wg01 address &#39;fe80::216:3eff:fe51:fd8c/64&#39;
set interfaces wireguard wg01 address &#39;192.168.0.1/24&#39;
set interfaces wireguard wg01 peer ospf02 allowed-ips &#39;::/0&#39;
set interfaces wireguard wg01 peer ospf02 allowed-ips &#39;0.0.0.0/0&#39;
set interfaces wireguard wg01 peer ospf02 endpoint &#39;10.1.1.101:12345&#39;
set interfaces wireguard wg01 peer ospf02 pubkey &#39;ie3...=&#39;
set interfaces wireguard wg01 port &#39;12345&#39;
set protocols ospfv3 parameters router-id 192.168.1.1
set protocols ospfv3 interface &#39;wg01&#39; area 0.0.0.0
set protocols ospfv3 interface &#39;lo&#39; area 0.0.0.0
</pre></div>
</div>
<p><strong>Node 2</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set interfaces wireguard wg01 address &#39;fe80::216:3eff:fe0a:7ada/64&#39;
set interfaces wireguard wg01 address &#39;192.168.0.2/24&#39;
set interfaces wireguard wg01 peer ospf01 allowed-ips &#39;::/0&#39;
set interfaces wireguard wg01 peer ospf01 allowed-ips &#39;0.0.0.0/0&#39;
set interfaces wireguard wg01 peer ospf01 endpoint &#39;10.1.1.100:12345&#39;
set interfaces wireguard wg01 peer ospf01 pubkey &#39;NHI...=&#39;
set interfaces wireguard wg01 port &#39;12345&#39;
set protocols ospfv3 parameters router-id 192.168.1.2
set protocols ospfv3 interface &#39;wg01&#39; area 0.0.0.0
set protocols ospfv3 interface &#39;lo&#39; area 0.0.0.0
</pre></div>
</div>
<p><strong>Status</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>vyos@ospf01:~$ sh ipv6 ospfv3 neighbor
Neighbor ID     Pri    DeadTime    State/IfState         Duration I/F[State]
192.168.0.2       1    00:00:37     Full/PointToPoint    00:18:03 wg01[PointToPoint]

vyos@ospf02# run sh ipv6 ospfv3 neighbor
Neighbor ID     Pri    DeadTime    State/IfState         Duration I/F[State]
192.168.0.1       1    00:00:39     Full/PointToPoint    00:19:44 wg01[PointToPoint]
</pre></div>
</div>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="segment-routing.html" class="btn btn-neutral float-left" title="Segment Routing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="pim.html" class="btn btn-neutral float-right" title="PIM – Protocol Independent Multicast" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../../copyright.html">Copyright</a> 2024, VyOS maintainers and contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <head>
      <style>
          #branch-select-container {
              position: fixed;
              bottom: 10px;
              right: 10px;
              background-color: #f0f0f0;
              padding: 5px;
              border: 1px solid #ccc;
              border-radius: 5px;
          }
      </style>
  </head>
  <body>
      <div id="branch-select-container">
          <select id="branch-select">
              <option value="sagitta">Sagitta</option>
              <option value="circinus">Circinus</option>
          </select>
      </div>
      <script>
          // Define the branches
          const branches = ['sagitta', 'circinus'];
  
          // Get the current branch name from the URL
          const currentUrl = window.location.href;
          const currentBranch = branches.find(branch => currentUrl.includes(branch));
  
          // Set the selected option in the dropdown
          const branchSelect = document.getElementById('branch-select');
          branchSelect.value = currentBranch;
  
          // Add an event listener to the dropdown
          branchSelect.addEventListener('change', () => {
              const newBranch = branchSelect.value;
              const newUrl = currentUrl.replace(currentBranch, newBranch);
              window.location.href = newUrl;
          });
      </script>
  </body>


</body>
</html>