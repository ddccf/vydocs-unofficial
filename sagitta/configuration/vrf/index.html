

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>VRF &mdash; VyOS 1.4.x (sagitta) documentation</title>
      <link rel="stylesheet" type="text/css" href="../../static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="../../static/sphinx-design.min.css?v=95c83b7e" />

  
    <link rel="shortcut icon" href="../../static/vyos-logo-icon.png"/>
      <script src="../../static/jquery.js?v=5d32c60e"></script>
      <script src="../../static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../static/documentation_options.js?v=8f5ed1cd"></script>
      <script src="../../static/doctools.js?v=9bcbadda"></script>
      <script src="../../static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../static/design-tabs.js?v=f930bc37"></script>
    <script src="../../static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="next" title="Operation Mode" href="../../operation/index.html" />
    <link rel="prev" title="Site-to-Site" href="../vpn/site2site_ipsec.html" />
    <style>#vyos-header-iframe{position:fixed;top:0;left:0;right:0;z-index:999999999;width:100%;border:none}</style>
    <style>#vyos-footer-iframe{width:100%;border:none}</style>
    <link href="../../static/css/custom.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/lists.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/hints.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/headers.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/breadcrumbs.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/linkButtons.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/text.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/leftSidebar.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/scrolls.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/tables.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/installation/running-on-bare-metal.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/code-snippets.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/separate-commands.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/configuration/index.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/datatables.css" rel="stylesheet" type="text/css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Archivo:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script type="text/javascript" charset="utf8" src="../../static/js/datatables.js"></script>
    <script type="text/javascript" charset="utf8" src="../../static/js/tables.js"></script>
    <script type="text/javascript" charset="utf8" src="../../static/js/codecopier.js"></script>
    <script type="text/javascript" charset="utf8" src="../../static/js/sidebar.js"></script>
    <script type="text/javascript" charset="utf8" src="../../static/js/footer.js"></script>
    </script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            VyOS
              <img src="../../static/vyos-logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../introducing/about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../introducing/history.html">History</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog/index.html">Changelog</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">First Steps</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../installation/index.html">Installation and Image Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../quick-start.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cli.html">Command Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cli.html#configuration-overview">Configuration Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Adminguide</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Configuration Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../container/index.html">Container</a></li>
<li class="toctree-l2"><a class="reference internal" href="../firewall/index.html">Firewall</a></li>
<li class="toctree-l2"><a class="reference internal" href="../highavailability/index.html">High availability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interfaces/index.html">Interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../loadbalancing/index.html">Load-balancing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nat/index.html">NAT</a></li>
<li class="toctree-l2"><a class="reference internal" href="../policy/index.html">Policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pki/index.html">PKI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/index.html">Protocols</a></li>
<li class="toctree-l2"><a class="reference internal" href="../service/index.html">Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="../system/index.html">System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../trafficpolicy/index.html">Traffic Policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vpn/index.html">VPN</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">VRF</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuration">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#zebra-kernel-route-filtering">Zebra/Kernel route filtering</a></li>
<li class="toctree-l4"><a class="reference internal" href="#nexthop-tracking">Nexthop Tracking</a></li>
<li class="toctree-l4"><a class="reference internal" href="#interfaces">Interfaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="#routing">Routing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#operation">Operation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vrf-example">Example</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#vrf-route-leaking">VRF route leaking</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vrf-and-nat">VRF and NAT</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#l3vpn-vrfs">L3VPN VRFs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#l3vpn-vrf-route-leaking">VRF Route Leaking</a></li>
<li class="toctree-l3"><a class="reference internal" href="#l3vpn-vrf-example-configuration">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#l3vpn-vrf-example-operation">Operation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../operation/index.html">Operation Mode</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../automation/index.html">VyOS Automation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshooting/index.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configexamples/index.html">Configuration Blueprints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configexamples/index.html#configuration-blueprints-autotest">Configuration Blueprints (autotest)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/build-vyos.html">Build VyOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/issues-features.html">Issues/Feature requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/upstream-packages.html">Upstream packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/testing.html">Testing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Misc</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../documentation.html">Write Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../coverage.html">Coverage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../copyright.html">Copyright Notice</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">VyOS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Configuration Guide</a></li>
      <li class="breadcrumb-item active">VRF</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../sources/configuration/vrf/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="vrf">
<span id="id1"></span><h1>VRF<a class="headerlink" href="#vrf" title="Link to this heading"></a></h1>
<p><abbr title="Virtual Routing and Forwarding">VRF</abbr> devices combined with ip rules
provides the ability to create virtual routing and forwarding domains (aka
VRFs, VRF-lite to be specific) in the Linux network stack. One use case is the
multi-tenancy problem where each tenant has their own unique routing tables and
in the very least need different default gateways.</p>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Link to this heading"></a></h2>
<p>A VRF device is created with an associated route table. Network interfaces are
then enslaved to a VRF device.</p>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-vrf-name-name">
set vrf name &lt;name&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-vrf-name-name" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>Create new VRF instance with <cite>&lt;name&gt;</cite>. The name is used when placing
individual interfaces into the VRF.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-vrf-name-name-table-id">
set vrf name &lt;name&gt; table &lt;id&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-vrf-name-name-table-id" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>Configured routing table <cite>&lt;id&gt;</cite> is used by VRF <cite>&lt;name&gt;</cite>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A routing table ID can not be modified once it is assigned. It can
only be changed by deleting and re-adding the VRF instance.</p>
</div>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-vrf-bind-to-all">
set vrf bind-to-all</span>
<a class="cmdlink" href="#cfgcmd-set-vrf-bind-to-all" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>By default the scope of the port bindings for unbound sockets is limited to
the default VRF. That is, it will not be matched by packets arriving on
interfaces enslaved to a VRF and processes may bind to the same port if
they bind to a VRF.</p>
<p>TCP &amp; UDP services running in the default VRF context (ie., not bound to any
VRF device) can work across all VRF domains by enabling this option.</p>
</div>
</div>
<section id="zebra-kernel-route-filtering">
<h3>Zebra/Kernel route filtering<a class="headerlink" href="#zebra-kernel-route-filtering" title="Link to this heading"></a></h3>
<p>Zebra supports prefix-lists and Route Mapss to match routes received from
other FRR components. The permit/deny facilities provided by these commands
can be used to filter which routes zebra will install in the kernel.</p>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-vrf-name-ip-protocol-protocol-route-map-route-map">
set vrf &lt;name&gt; ip protocol &lt;protocol&gt; route-map &lt;route-map&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-vrf-name-ip-protocol-protocol-route-map-route-map" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>Apply a route-map filter to routes for the specified protocol.</p>
<p>The following protocols can be used: any, babel, bgp, connected, eigrp,
isis, kernel, ospf, rip, static, table</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you choose any as the option that will cause all protocols that
are sending routes to zebra.</p>
</div>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-vrf-name-ipv6-protocol-protocol-route-map-route-map">
set vrf &lt;name&gt; ipv6 protocol &lt;protocol&gt; route-map &lt;route-map&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-vrf-name-ipv6-protocol-protocol-route-map-route-map" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>Apply a route-map filter to routes for the specified protocol.</p>
<p>The following protocols can be used: any, babel, bgp, connected, isis,
kernel, ospfv3, ripng, static, table</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you choose any as the option that will cause all protocols that
are sending routes to zebra.</p>
</div>
</div>
</div>
</section>
<section id="nexthop-tracking">
<h3>Nexthop Tracking<a class="headerlink" href="#nexthop-tracking" title="Link to this heading"></a></h3>
<p>Nexthop tracking resolve nexthops via the default route by default. This is enabled
by default for a traditional profile of FRR which we use. It and can be disabled if
you do not wan’t to e.g. allow BGP to peer across the default route.</p>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-vrf-name-name-ip-nht-no-resolve-via-default">
set vrf name &lt;name&gt; ip nht no-resolve-via-default</span>
<a class="cmdlink" href="#cfgcmd-set-vrf-name-name-ip-nht-no-resolve-via-default" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>Do not allow IPv4 nexthop tracking to resolve via the default route. This
parameter is configured per-VRF, so the command is also available in the VRF
subnode.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-vrf-name-name-ipv6-nht-no-resolve-via-default">
set vrf name &lt;name&gt; ipv6 nht no-resolve-via-default</span>
<a class="cmdlink" href="#cfgcmd-set-vrf-name-name-ipv6-nht-no-resolve-via-default" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>Do not allow IPv4 nexthop tracking to resolve via the default route. This
parameter is configured per-VRF, so the command is also available in the VRF
subnode.</p>
</div>
</div>
</section>
<section id="interfaces">
<h3>Interfaces<a class="headerlink" href="#interfaces" title="Link to this heading"></a></h3>
<p>When VRFs are used it is not only mandatory to create a VRF but also the VRF
itself needs to be assigned to an interface.</p>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-interfaces-dummy-ethernet-bonding-bridge-pppoe-interface-vrf-name">
set interfaces &lt;dummy | ethernet | bonding | bridge | pppoe&gt; &lt;interface&gt; vrf &lt;name&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-interfaces-dummy-ethernet-bonding-bridge-pppoe-interface-vrf-name" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>Assign interface identified by <cite>&lt;interface&gt;</cite> to VRF named <cite>&lt;name&gt;</cite>.</p>
</div>
</div>
</section>
<section id="routing">
<h3>Routing<a class="headerlink" href="#routing" title="Link to this heading"></a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>VyOS 1.4 (sagitta) introduced dynamic routing support for VRFs.</p>
</div>
<p>Currently dynamic routing is supported for the following protocols:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../protocols/bgp.html#routing-bgp"><span class="std std-ref">BGP</span></a></p></li>
<li><p><a class="reference internal" href="../protocols/isis.html#routing-isis"><span class="std std-ref">IS-IS</span></a></p></li>
<li><p><a class="reference internal" href="../protocols/ospf.html#routing-ospf"><span class="std std-ref">OSPF</span></a></p></li>
<li><p><a class="reference internal" href="../protocols/ospf.html#routing-ospfv3"><span class="std std-ref">OSPFv3 (IPv6)</span></a></p></li>
<li><p><a class="reference internal" href="../protocols/static.html#routing-static"><span class="std std-ref">Static</span></a></p></li>
</ul>
<p>The CLI configuration is same as mentioned in above articles. The only
difference is, that each routing protocol used, must be prefixed with the <cite>vrf
name &lt;name&gt;</cite> command.</p>
<section id="example">
<h4>Example<a class="headerlink" href="#example" title="Link to this heading"></a></h4>
<p>The following commands would be required to set options for a given dynamic
routing protocol inside a given vrf:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../protocols/bgp.html#routing-bgp"><span class="std std-ref">BGP</span></a>: <code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">vrf</span> <span class="pre">name</span> <span class="pre">&lt;name&gt;</span> <span class="pre">protocols</span> <span class="pre">bgp</span> <span class="pre">...</span></code></p></li>
<li><p><a class="reference internal" href="../protocols/isis.html#routing-isis"><span class="std std-ref">IS-IS</span></a>: <code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">vrf</span> <span class="pre">name</span> <span class="pre">&lt;name&gt;</span> <span class="pre">protocols</span> <span class="pre">isis</span> <span class="pre">...</span></code></p></li>
<li><p><a class="reference internal" href="../protocols/ospf.html#routing-ospf"><span class="std std-ref">OSPF</span></a>: <code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">vrf</span> <span class="pre">name</span> <span class="pre">&lt;name&gt;</span> <span class="pre">protocols</span> <span class="pre">ospf</span> <span class="pre">...</span></code></p></li>
<li><p><a class="reference internal" href="../protocols/ospf.html#routing-ospfv3"><span class="std std-ref">OSPFv3 (IPv6)</span></a>: <code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">vrf</span> <span class="pre">name</span> <span class="pre">&lt;name&gt;</span> <span class="pre">protocols</span> <span class="pre">ospfv3</span> <span class="pre">...</span></code></p></li>
<li><p><a class="reference internal" href="../protocols/static.html#routing-static"><span class="std std-ref">Static</span></a>: <code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">vrf</span> <span class="pre">name</span> <span class="pre">&lt;name&gt;</span> <span class="pre">protocols</span> <span class="pre">static</span> <span class="pre">...</span></code></p></li>
</ul>
</section>
</section>
</section>
<section id="operation">
<h2>Operation<a class="headerlink" href="#operation" title="Link to this heading"></a></h2>
<p>It is not sufficient to only configure a VRF but VRFs must be maintained, too.
For VRF maintenance the following operational commands are in place.</p>
<div class="cmd cmd-op">
<div class="opcmd-heading">
<span class="opcmd" id="opcmd-show-vrf">
show vrf</span>
<a class="cmdlink" href="#opcmd-show-vrf" title="Permalink to this Command"></a></div><div class="opcmd-body">
<p>Lists VRFs that have been created</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>vyos@vyos:~$ show vrf
VRF name          state     mac address        flags                     interfaces
--------          -----     -----------        -----                     ----------
blue              up        00:53:12:d8:74:24  noarp,master,up,lower_up  dum200,eth0.302
red               up        00:53:de:02:df:aa  noarp,master,up,lower_up  dum100,eth0.300,bond0.100,peth0
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Command should probably be extended to list also the real
interfaces assigned to this one VRF to get a better overview.</p>
</div>
</div>
</div>
<div class="cmd cmd-op">
<div class="opcmd-heading">
<span class="opcmd" id="opcmd-show-vrf-name">
show vrf &lt;name&gt;</span>
<a class="cmdlink" href="#opcmd-show-vrf-name" title="Permalink to this Command"></a></div><div class="opcmd-body">
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>vyos@vyos:~$ show vrf name blue
VRF name          state     mac address        flags                     interfaces
--------          -----     -----------        -----                     ----------
blue              up        00:53:12:d8:74:24  noarp,master,up,lower_up  dum200,eth0.302
</pre></div>
</div>
</div>
</div>
<div class="cmd cmd-op">
<div class="opcmd-heading">
<span class="opcmd" id="opcmd-show-ip-route-vrf-name">
show ip route vrf &lt;name&gt;</span>
<a class="cmdlink" href="#opcmd-show-ip-route-vrf-name" title="Permalink to this Command"></a></div><div class="opcmd-body">
<p>Display IPv4 routing table for VRF identified by <cite>&lt;name&gt;</cite>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>vyos@vyos:~$ show ip route vrf blue
Codes: K - kernel route, C - connected, S - static, R - RIP,
       O - OSPF, I - IS-IS, B - BGP, E - EIGRP, N - NHRP,
       T - Table, v - VNC, V - VNC-Direct, A - Babel, D - SHARP,
       F - PBR, f - OpenFabric,
       &gt; - selected route, * - FIB route, q - queued route, r - rejected route

VRF blue:
K   0.0.0.0/0 [255/8192] unreachable (ICMP unreachable), 00:00:50
S&gt;* 172.16.0.0/16 [1/0] via 192.0.2.1, dum1, 00:00:02
C&gt;* 192.0.2.0/24 is directly connected, dum1, 00:00:06
</pre></div>
</div>
</div>
</div>
<div class="cmd cmd-op">
<div class="opcmd-heading">
<span class="opcmd" id="opcmd-show-ipv6-route-vrf-name">
show ipv6 route vrf &lt;name&gt;</span>
<a class="cmdlink" href="#opcmd-show-ipv6-route-vrf-name" title="Permalink to this Command"></a></div><div class="opcmd-body">
<p>Display IPv6 routing table for VRF identified by <cite>&lt;name&gt;</cite>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>vyos@vyos:~$ show ipv6 route vrf red
Codes: K - kernel route, C - connected, S - static, R - RIPng,
       O - OSPFv3, I - IS-IS, B - BGP, N - NHRP, T - Table,
       v - VNC, V - VNC-Direct, A - Babel, D - SHARP, F - PBR,
       f - OpenFabric,
       &gt; - selected route, * - FIB route, q - queued route, r - rejected route

VRF red:
K   ::/0 [255/8192] unreachable (ICMP unreachable), 00:43:20
C&gt;* 2001:db8::/64 is directly connected, dum1, 00:02:19
C&gt;* fe80::/64 is directly connected, dum1, 00:43:19
K&gt;* ff00::/8 [0/256] is directly connected, dum1, 00:43:19
</pre></div>
</div>
</div>
</div>
<div class="cmd cmd-op">
<div class="opcmd-heading">
<span class="opcmd" id="opcmd-ping-host-vrf-name">
ping &lt;host&gt; vrf &lt;name&gt;</span>
<a class="cmdlink" href="#opcmd-ping-host-vrf-name" title="Permalink to this Command"></a></div><div class="opcmd-body">
<p>The ping command is used to test whether a network host is reachable or not.</p>
<p>Ping uses ICMP protocol’s mandatory ECHO_REQUEST datagram to elicit an
ICMP ECHO_RESPONSE from a host or gateway. ECHO_REQUEST datagrams (pings)
will have an IP and ICMP header, followed by “struct timeval” and an
arbitrary number of pad bytes used to fill out the packet.</p>
<p>When doing fault isolation with ping, you should first run it on the local
host, to verify that the local network interface is up and running. Then,
continue with hosts and gateways further down the road towards your
destination. Round-trip time and packet loss statistics are computed.</p>
<p>Duplicate packets are not included in the packet loss calculation, although
the round-trip time of these packets is used in calculating the minimum/
average/maximum round-trip time numbers.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Ping command can be interrupted at any given time using <code class="docutils literal notranslate"><span class="pre">&lt;Ctrl&gt;+c</span></code>.
A brief statistic is shown afterwards.</p>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>vyos@vyos:~$ ping 192.0.2.1 vrf red
PING 192.0.2.1 (192.0.2.1) 56(84) bytes of data.
64 bytes from 192.0.2.1: icmp_seq=1 ttl=64 time=0.070 ms
64 bytes from 192.0.2.1: icmp_seq=2 ttl=64 time=0.078 ms
^C
--- 192.0.2.1 ping statistics ---
2 packets transmitted, 2 received, 0% packet loss, time 4ms
rtt min/avg/max/mdev = 0.070/0.074/0.078/0.004 ms
</pre></div>
</div>
</div>
</div>
<div class="cmd cmd-op">
<div class="opcmd-heading">
<span class="opcmd" id="opcmd-traceroute-vrf-name-ipv4-ipv6-host">
traceroute vrf &lt;name&gt; [ipv4 | ipv6] &lt;host&gt;</span>
<a class="cmdlink" href="#opcmd-traceroute-vrf-name-ipv4-ipv6-host" title="Permalink to this Command"></a></div><div class="opcmd-body">
<p>Displays the route packets taken to a network host utilizing VRF instance
identified by <cite>&lt;name&gt;</cite>. When using the IPv4 or IPv6 option, displays the
route packets taken to the given hosts IP address family. This option is
useful when the host is specified as a hostname rather than an IP address.</p>
</div>
</div>
<div class="cmd cmd-op">
<div class="opcmd-heading">
<span class="opcmd" id="opcmd-force-vrf-name">
force vrf &lt;name&gt;</span>
<a class="cmdlink" href="#opcmd-force-vrf-name" title="Permalink to this Command"></a></div><div class="opcmd-body">
<p>Join a given VRF. This will open a new subshell within the specified VRF.</p>
<p>The prompt is adjusted to reflect this change in both config and op-mode.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>vyos@vyos:~$ force vrf blue
vyos@vyos(vrf:blue):~$
</pre></div>
</div>
</div>
</div>
</section>
<section id="vrf-example">
<span id="id2"></span><h2>Example<a class="headerlink" href="#vrf-example" title="Link to this heading"></a></h2>
<section id="vrf-route-leaking">
<h3>VRF route leaking<a class="headerlink" href="#vrf-route-leaking" title="Link to this heading"></a></h3>
<p>The following example topology was built using EVE-NG.</p>
<figure class="align-default" id="id9">
<img alt="VRF topology example" src="../../images/vrf-example-topology-01.png" />
<figcaption>
<p><span class="caption-text">VRF route leaking</span><a class="headerlink" href="#id9" title="Link to this image"></a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>PC1 is in the <code class="docutils literal notranslate"><span class="pre">default</span></code> VRF and acting as e.g. a “fileserver”</p></li>
<li><p>PC2 is in VRF <code class="docutils literal notranslate"><span class="pre">blue</span></code> which is the development department</p></li>
<li><p>PC3 and PC4 are connected to a bridge device on router <code class="docutils literal notranslate"><span class="pre">R1</span></code> which is in VRF
<code class="docutils literal notranslate"><span class="pre">red</span></code>. Say this is the HR department.</p></li>
<li><p>R1 is managed through an out-of-band network that resides in VRF <code class="docutils literal notranslate"><span class="pre">mgmt</span></code></p></li>
</ul>
<section id="vrf-example-configuration">
<span id="id3"></span><h4>Configuration<a class="headerlink" href="#vrf-example-configuration" title="Link to this heading"></a></h4>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set interfaces bridge br10 address &#39;10.30.0.254/24&#39;
set interfaces bridge br10 member interface eth3
set interfaces bridge br10 member interface eth4
set interfaces bridge br10 vrf &#39;red&#39;

set interfaces ethernet eth0 address &#39;dhcp&#39;
set interfaces ethernet eth0 vrf &#39;mgmt&#39;
set interfaces ethernet eth1 address &#39;10.0.0.254/24&#39;
set interfaces ethernet eth2 address &#39;10.20.0.254/24&#39;
set interfaces ethernet eth2 vrf &#39;blue&#39;

set protocols static route 10.20.0.0/24 interface eth2 vrf &#39;blue&#39;
set protocols static route 10.30.0.0/24 interface br10 vrf &#39;red&#39;

set service ssh disable-host-validation
set service ssh vrf &#39;mgmt&#39;

set system name-server &#39;eth0&#39;

set vrf name blue protocols static route 10.0.0.0/24 interface eth1 vrf &#39;default&#39;
set vrf name blue table &#39;3000&#39;
set vrf name mgmt table &#39;1000&#39;
set vrf name red protocols static route 10.0.0.0/24 interface eth1 vrf &#39;default&#39;
set vrf name red table &#39;2000&#39;
</pre></div>
</div>
</div></blockquote>
</section>
</section>
<section id="vrf-and-nat">
<h3>VRF and NAT<a class="headerlink" href="#vrf-and-nat" title="Link to this heading"></a></h3>
<section id="vrf-nat-configuration">
<span id="id4"></span><h4>Configuration<a class="headerlink" href="#vrf-nat-configuration" title="Link to this heading"></a></h4>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set interfaces ethernet eth0 address &#39;172.16.50.12/24&#39;
set interfaces ethernet eth0 vrf &#39;red&#39;

set interfaces ethernet eth1 address &#39;192.168.130.100/24&#39;
set interfaces ethernet eth1 vrf &#39;blue&#39;

set nat destination rule 110 description &#39;NAT ssh- INSIDE&#39;
set nat destination rule 110 destination port &#39;2022&#39;
set nat destination rule 110 inbound-interface &#39;eth0&#39;
set nat destination rule 110 protocol &#39;tcp&#39;
set nat destination rule 110 translation address &#39;192.168.130.40&#39;

set nat source rule 100 outbound-interface &#39;eth0&#39;
set nat source rule 100 protocol &#39;all&#39;
set nat source rule 100 source address &#39;192.168.130.0/24&#39;
set nat source rule 100 translation address &#39;masquerade&#39;

set service ssh vrf &#39;red&#39;

set vrf bind-to-all
set vrf name blue protocols static route 0.0.0.0/0 next-hop 172.16.50.1 vrf &#39;red&#39;
set vrf name blue protocols static route 172.16.50.0/24 interface eth0 vrf &#39;red&#39;
set vrf name blue table &#39;1010&#39;

set vrf name red protocols static route 0.0.0.0/0 next-hop 172.16.50.1
set vrf name red protocols static route 192.168.130.0/24 interface eth1 vrf &#39;blue&#39;
set vrf name red table &#39;2020&#39;
</pre></div>
</div>
</div></blockquote>
</section>
<section id="vrf-example-operation">
<span id="id5"></span><h4>Operation<a class="headerlink" href="#vrf-example-operation" title="Link to this heading"></a></h4>
<p>After committing the configuration we can verify all leaked routes are
installed, and try to ICMP ping PC1 from PC3.</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PCS&gt; ping 10.0.0.1

84 bytes from 10.0.0.1 icmp_seq=1 ttl=63 time=1.943 ms
84 bytes from 10.0.0.1 icmp_seq=2 ttl=63 time=1.618 ms
84 bytes from 10.0.0.1 icmp_seq=3 ttl=63 time=1.745 ms
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>VPCS&gt; show ip

NAME        : VPCS[1]
IP/MASK     : 10.30.0.1/24
GATEWAY     : 10.30.0.254
DNS         :
MAC         : 00:50:79:66:68:0f
</pre></div>
</div>
</div></blockquote>
<section id="vrf-default-routing-table">
<h5>VRF default routing table<a class="headerlink" href="#vrf-default-routing-table" title="Link to this heading"></a></h5>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>vyos@R1:~$ show ip route
Codes: K - kernel route, C - connected, S - static, R - RIP,
       O - OSPF, I - IS-IS, B - BGP, E - EIGRP, N - NHRP,
       T - Table, v - VNC, V - VNC-Direct, A - Babel, D - SHARP,
       F - PBR, f - OpenFabric,
       &gt; - selected route, * - FIB route, q - queued, r - rejected, b - backup

C&gt;* 10.0.0.0/24 is directly connected, eth1, 00:07:44
S&gt;* 10.20.0.0/24 [1/0] is directly connected, eth2 (vrf blue), weight 1, 00:07:38
S&gt;* 10.30.0.0/24 [1/0] is directly connected, br10 (vrf red), weight 1, 00:07:38
</pre></div>
</div>
</div></blockquote>
</section>
<section id="vrf-red-routing-table">
<h5>VRF red routing table<a class="headerlink" href="#vrf-red-routing-table" title="Link to this heading"></a></h5>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>vyos@R1:~$ show ip route vrf red
Codes: K - kernel route, C - connected, S - static, R - RIP,
       O - OSPF, I - IS-IS, B - BGP, E - EIGRP, N - NHRP,
       T - Table, v - VNC, V - VNC-Direct, A - Babel, D - SHARP,
       F - PBR, f - OpenFabric,
       &gt; - selected route, * - FIB route, q - queued, r - rejected, b - backup

VRF red:
K&gt;* 0.0.0.0/0 [255/8192] unreachable (ICMP unreachable), 00:07:57
S&gt;* 10.0.0.0/24 [1/0] is directly connected, eth1 (vrf default), weight 1, 00:07:40
C&gt;* 10.30.0.0/24 is directly connected, br10, 00:07:54
</pre></div>
</div>
</div></blockquote>
</section>
<section id="vrf-blue-routing-table">
<h5>VRF blue routing table<a class="headerlink" href="#vrf-blue-routing-table" title="Link to this heading"></a></h5>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>vyos@R1:~$ show ip route vrf blue
Codes: K - kernel route, C - connected, S - static, R - RIP,
       O - OSPF, I - IS-IS, B - BGP, E - EIGRP, N - NHRP,
       T - Table, v - VNC, V - VNC-Direct, A - Babel, D - SHARP,
       F - PBR, f - OpenFabric,
       &gt; - selected route, * - FIB route, q - queued, r - rejected, b - backup

VRF blue:
K&gt;* 0.0.0.0/0 [255/8192] unreachable (ICMP unreachable), 00:08:00
S&gt;* 10.0.0.0/24 [1/0] is directly connected, eth1 (vrf default), weight 1, 00:07:44
C&gt;* 10.20.0.0/24 is directly connected, eth2, 00:07:53
</pre></div>
</div>
</div></blockquote>
</section>
</section>
</section>
</section>
</section>
<section id="l3vpn-vrfs">
<h1>L3VPN VRFs<a class="headerlink" href="#l3vpn-vrfs" title="Link to this heading"></a></h1>
<p><abbr title=" Layer 3 Virtual Private Networks ">L3VPN VRFs</abbr> bgpd supports for
IPv4 RFC 4364 and IPv6 RFC 4659. L3VPN routes, and their associated VRF
MPLS labels, can be distributed to VPN SAFI neighbors in the default, i.e.,
non VRF, BGP instance. VRF MPLS labels are reached using core MPLS labels
which are distributed using LDP or BGP labeled unicast.
bgpd also supports inter-VRF route leaking.</p>
<section id="l3vpn-vrf-route-leaking">
<span id="id6"></span><h2>VRF Route Leaking<a class="headerlink" href="#l3vpn-vrf-route-leaking" title="Link to this heading"></a></h2>
<p>BGP routes may be leaked (i.e. copied) between a unicast VRF RIB and the VPN
SAFI RIB of the default VRF for use in MPLS-based L3VPNs. Unicast routes may
also be leaked between any VRFs (including the unicast RIB of the default BGP
instance). A shortcut syntax is also available for specifying leaking from
one VRF to another VRF using the default instance’s VPN RIB as the intemediary
. A common application of the VRF-VRF feature is to connect a customer’s
private routing domain to a provider’s VPN service. Leaking is configured from
the point of view of an individual VRF: import refers to routes leaked from VPN
to a unicast VRF, whereas export refers to routes leaked from a unicast VRF to
VPN.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Routes exported from a unicast VRF to the VPN RIB must be augmented
by two parameters:</p>
<blockquote>
<div><p>an RD / RTLIST</p>
</div></blockquote>
<p>Configuration for these exported routes must, at a minimum, specify
these two parameters.</p>
</div>
</section>
<section id="l3vpn-vrf-example-configuration">
<span id="id7"></span><h2>Configuration<a class="headerlink" href="#l3vpn-vrf-example-configuration" title="Link to this heading"></a></h2>
<p>Configuration of route leaking between a unicast VRF RIB and the VPN SAFI RIB
of the default VRF is accomplished via commands in the context of a VRF
address-family.</p>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-vrf-name-name-protocols-bgp-address-family-ipv4-unicast-ipv6-unicast-rd-vpn-export-asn-nn-address-nn">
set vrf name &lt;name&gt; protocols bgp address-family          &lt;ipv4-unicast|ipv6-unicast&gt; rd vpn export &lt;asn:nn|address:nn&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-vrf-name-name-protocols-bgp-address-family-ipv4-unicast-ipv6-unicast-rd-vpn-export-asn-nn-address-nn" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>Specifies the route distinguisher to be added to a route exported from the
current unicast VRF to VPN.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-vrf-name-name-protocols-bgp-address-family-ipv4-unicast-ipv6-unicast-route-target-vpn-import-export-both-rtlist">
set vrf name &lt;name&gt; protocols bgp address-family          &lt;ipv4-unicast|ipv6-unicast&gt; route-target vpn &lt;import|export|both&gt;          [RTLIST]</span>
<a class="cmdlink" href="#cfgcmd-set-vrf-name-name-protocols-bgp-address-family-ipv4-unicast-ipv6-unicast-route-target-vpn-import-export-both-rtlist" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>Specifies the route-target list to be attached to a route (export) or the
route-target list to match against (import) when exporting/importing
between the current unicast VRF and VPN.The RTLIST is a space-separated
list of route-targets, which are BGP extended community values as
described in Extended Communities Attribute.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-vrf-name-name-protocols-bgp-address-family-ipv4-unicast-ipv6-unicast-label-vpn-export-0-1048575-auto">
set vrf name &lt;name&gt; protocols bgp address-family          &lt;ipv4-unicast|ipv6-unicast&gt; label vpn export &lt;0-1048575|auto&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-vrf-name-name-protocols-bgp-address-family-ipv4-unicast-ipv6-unicast-label-vpn-export-0-1048575-auto" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>Enables an MPLS label to be attached to a route exported from the current
unicast VRF to VPN. If the value specified is auto, the label value is
automatically assigned from a pool maintained.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-vrf-name-name-protocols-bgp-address-family-ipv4-unicast-ipv6-unicast-label-vpn-allocation-mode-per-nexthop">
set vrf name &lt;name&gt; protocols bgp address-family          &lt;ipv4-unicast|ipv6-unicast&gt; label vpn allocation-mode per-nexthop</span>
<a class="cmdlink" href="#cfgcmd-set-vrf-name-name-protocols-bgp-address-family-ipv4-unicast-ipv6-unicast-label-vpn-allocation-mode-per-nexthop" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>Select how labels are allocated in the given VRF. By default, the per-vrf
mode is selected, and one label is used for all prefixes from the VRF. The
per-nexthop will use a unique label for all prefixes that are reachable via
the same nexthop.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-vrf-name-name-protocols-bgp-address-family-ipv4-unicast-ipv6-unicast-route-map-vpn-import-export-route-map-name">
set vrf name &lt;name&gt; protocols bgp address-family          &lt;ipv4-unicast|ipv6-unicast&gt; route-map vpn &lt;import|export&gt;          [route-map &lt;name&gt;]</span>
<a class="cmdlink" href="#cfgcmd-set-vrf-name-name-protocols-bgp-address-family-ipv4-unicast-ipv6-unicast-route-map-vpn-import-export-route-map-name" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>Specifies an optional route-map to be applied to routes imported or
exported between the current unicast VRF and VPN.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-vrf-name-name-protocols-bgp-address-family-ipv4-unicast-ipv6-unicast-import-export-vpn">
set vrf name &lt;name&gt; protocols bgp address-family          &lt;ipv4-unicast|ipv6-unicast&gt; &lt;import|export&gt; vpn</span>
<a class="cmdlink" href="#cfgcmd-set-vrf-name-name-protocols-bgp-address-family-ipv4-unicast-ipv6-unicast-import-export-vpn" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>Enables import or export of routes between the current unicast VRF and VPN.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-vrf-name-name-protocols-bgp-address-family-ipv4-unicast-ipv6-unicast-import-vrf-name">
set vrf name &lt;name&gt; protocols bgp address-family          &lt;ipv4-unicast|ipv6-unicast&gt; import vrf &lt;name&gt;</span>
<a class="cmdlink" href="#cfgcmd-set-vrf-name-name-protocols-bgp-address-family-ipv4-unicast-ipv6-unicast-import-vrf-name" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>Shortcut syntax for specifying automatic leaking from vrf VRFNAME to the
current VRF using the VPN RIB as intermediary. The RD and RT are auto
derived and should not be specified explicitly for either the source or
destination VRF’s.</p>
</div>
</div>
<div class="cmd cmd-cfg">
<div class="cfgcmd-heading">
<span class="cfgcmd" id="cfgcmd-set-vrf-name-name-protocols-bgp-interface-interface-mpls-forwarding">
set vrf name &lt;name&gt; protocols bgp interface &lt;interface&gt; mpls          forwarding</span>
<a class="cmdlink" href="#cfgcmd-set-vrf-name-name-protocols-bgp-interface-interface-mpls-forwarding" title="Permalink to this Command"></a></div><div class="cfgcmd-body">
<p>It is possible to permit BGP install VPN prefixes without transport labels.
This configuration will install VPN prefixes originated from an e-bgp session,
and with the next-hop directly connected.</p>
</div>
</div>
</section>
<section id="l3vpn-vrf-example-operation">
<span id="id8"></span><h2>Operation<a class="headerlink" href="#l3vpn-vrf-example-operation" title="Link to this heading"></a></h2>
<p>It is not sufficient to only configure a L3VPN VRFs but L3VPN VRFs must be
maintained, too.For L3VPN VRF maintenance the following operational commands
are in place.</p>
<div class="cmd cmd-op">
<div class="opcmd-heading">
<span class="opcmd" id="opcmd-show-bgp-ipv4-ipv6-vpn">
show bgp &lt;ipv4|ipv6&gt; vpn</span>
<a class="cmdlink" href="#opcmd-show-bgp-ipv4-ipv6-vpn" title="Permalink to this Command"></a></div><div class="opcmd-body">
<blockquote>
<div><p>Print active IPV4 or IPV6 routes advertised via the VPN SAFI.</p>
</div></blockquote>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>BGP table version is 2, local router ID is 10.0.1.1, vrf id 0
Default local pref 100, local AS 65001
Status codes:  s suppressed, d damped, h history, * valid, &gt; best, = multipath,
               i internal, r RIB-failure, S Stale, R Removed
Nexthop codes: @NNN nexthop&#39;s vrf id, &lt; announce-nh-self
Origin codes:  i - IGP, e - EGP, ? - incomplete

   Network          Next Hop            Metric LocPrf Weight Path
Route Distinguisher: 10.50.50.1:1011
*&gt;i10.50.50.0/24    10.0.0.7                  0    100      0 i
    UN=10.0.0.7 EC{65035:1011} label=80 type=bgp, subtype=0
Route Distinguisher: 10.60.60.1:1011
*&gt;i10.60.60.0/24    10.0.0.10              0    100      0 i
    UN=10.0.0.10  EC{65035:1011} label=80 type=bgp, subtype=0
</pre></div>
</div>
</div>
</div>
<div class="cmd cmd-op">
<div class="opcmd-heading">
<span class="opcmd" id="opcmd-show-bgp-ipv4-ipv6-vpn-summary">
show bgp &lt;ipv4|ipv6&gt; vpn summary</span>
<a class="cmdlink" href="#opcmd-show-bgp-ipv4-ipv6-vpn-summary" title="Permalink to this Command"></a></div><div class="opcmd-body">
<blockquote>
<div><p>Print a summary of neighbor connections for the specified AFI/SAFI
combination.</p>
</div></blockquote>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>BGP router identifier 10.0.1.1, local AS number 65001 vrf-id 0
BGP table version 0
RIB entries 9, using 1728 bytes of memory
Peers 4, using 85 KiB of memory
Peer groups 1, using 64 bytes of memory

Neighbor        V         AS   MsgRcvd   MsgSent   TblVer  InQ OutQ  Up/Down State/PfxRcd   PfxSnt
10.0.0.7        4      65001      2860      2870        0    0    0 1d23h34m            2       10
</pre></div>
</div>
</div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../vpn/site2site_ipsec.html" class="btn btn-neutral float-left" title="Site-to-Site" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../../operation/index.html" class="btn btn-neutral float-right" title="Operation Mode" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../../copyright.html">Copyright</a> 2023, VyOS maintainers and contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>